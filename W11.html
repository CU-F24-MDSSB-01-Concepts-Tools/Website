<!DOCTYPE html>
<html lang="en"><head>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/tabby.min.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.5.56">

  <meta name="author" content="Jan Lorenz">
  <title>Data Science Concepts / Data Science Tools – W#11: Final Project, Collaborative Git, Bootstrapping, Cross validation, Bias-Variance Tradeoff</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="site_libs/revealjs/dist/theme/quarto.css">
  <link href="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">W#11: Final Project, Collaborative Git, Bootstrapping, Cross validation, Bias-Variance Tradeoff</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Jan Lorenz 
</div>
</div>
</div>

</section><section id="TOC">
<nav role="doc-toc"> 
<h2 id="toc-title">Table of contents</h2>
<ul>
<li><a href="#/final-project" id="/toc-final-project">Final Project</a></li>
<li><a href="#/modeling-mindsets" id="/toc-modeling-mindsets">Modeling Mindsets</a></li>
<li><a href="#/collaborative-work-with-git" id="/toc-collaborative-work-with-git">Collaborative Work with Git</a></li>
<li><a href="#/bootstrapping" id="/toc-bootstrapping">Bootstrapping</a></li>
<li><a href="#/cross-validation-another-resampling-method" id="/toc-cross-validation-another-resampling-method">Cross validation: Another resampling method</a></li>
<li><a href="#/wisdom-of-the-crowd-bias-and-diversity" id="/toc-wisdom-of-the-crowd-bias-and-diversity">Wisdom of the crowd, Bias and Diversity</a></li>
<li><a href="#/bias-variance-trade-off-in-a-script" id="/toc-bias-variance-trade-off-in-a-script">Bias-variance trade-off in a script</a></li>
</ul>
</nav>
</section>
<section>
<section id="final-project" class="title-slide slide level1 center" data-background-color="khaki">
<h1>Final Project</h1>

</section>
<section id="a-project-report-in-a-nutshell" class="slide level2" data-background-color="khaki">
<h2>A project report in a nutshell</h2>
<ul>
<li>You pick a dataset,</li>
<li>do some interesting question-driven data analysis with it,</li>
<li>write up a well structured and nicely formatted report about the analysis, and</li>
<li>present it at the end of the semester.</li>
</ul>
</section>
<section id="six-types-of-questions" class="slide level2 smaller" data-background-color="khaki">
<h2>Six types of questions</h2>
<div class="columns">
<div class="column" style="width:60%;">
<ol type="1">
<li><strong>Descriptive:</strong> summarize a characteristic of data</li>
<li><strong>Exploratory:</strong> analyze to see if there are patterns, trends, or relationships between variables (hypothesis generating)</li>
<li><strong>Inferential:</strong> analyze patterns, trends, or relationships in representative data from a population</li>
<li><strong>Predictive:</strong> make predictions for individuals or groups of individuals</li>
<li><strong>Causal:</strong> whether changing one factor will change another factor, on average, in a population</li>
<li><strong>Mechanistic:</strong> explore “how” as opposed to whether</li>
</ol>
</div><div class="column" style="width:40%;">
<p><img data-src="img/DataAnalysisFlowChart_LeekPeng.jpeg"></p>
</div></div>

<aside><div>
<p>Leek, Jeffery T., and Roger D. Peng. 2015. “What Is the Question?” Science 347 (6228): 1314–15. <a href="https://doi.org/10.1126/science.aaa6146" class="uri">https://doi.org/10.1126/science.aaa6146</a>.</p>
</div></aside></section>
<section id="what-are-good-questions" class="slide level2 smaller" data-background-color="khaki">
<h2>What are good questions?</h2>
<p>A good question</p>
<ul>
<li>is not too broad (= complicated to answer)</li>
<li>is not too specific (= trivial to answer)</li>
<li>can be answered or at least approached with data</li>
<li>call for one of the different types of data analysis:
<ul>
<li>descriptive</li>
<li>exploratory</li>
<li>inferential</li>
<li>predictive</li>
<li>(causal or mechanistic – not the typical choices for a short term data analysis projects. They should not be central but may be touched.)</li>
</ul></li>
</ul>
</section>
<section id="tools-and-advice-for-questions" class="slide level2 smaller" data-background-color="khaki">
<h2>Tools and advice for questions</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><span style="color:blue;"><strong>Descriptive</strong></span></p>
<div class="fragment">
<ul>
<li>What is an observation? <span style="color:red;">Answer this in any data analysis!</span></li>
<li>What are the variables?</li>
<li>Summary statistics and basic visualizations</li>
<li>Category frequencies and numerical distributions</li>
</ul>
</div>
</div><div class="column" style="width:50%;">
<p><span style="color:blue;"><strong>Exploratory</strong></span></p>
<div class="fragment">
<ul>
<li>Questions specific to the topic</li>
<li>Compute/summarize relevant variables: percentages, ratios, differences, …)</li>
<li>Scatter plots</li>
<li>Correlations</li>
<li>Cluster Analysis</li>
<li><strong>Crafted computations and visualizations for your particular questions</strong></li>
</ul>
</div>
</div></div>
</section>
<section id="tools-and-advice-for-questions-1" class="slide level2 smaller" data-background-color="khaki">
<h2>Tools and advice for questions</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><span style="color:blue;"><strong>Inferential</strong></span></p>
<div class="fragment">
<ul>
<li>Describe the population the data represents</li>
<li>Can it be considered a random sample?</li>
<li>Think theoretically about variable selection and data transformations</li>
<li>Interpret coefficients of models</li>
<li>Be careful interpreting coefficients when variables are highly correlated</li>
<li>Are effects statistical significant?</li>
<li>Hypothesis test: Describe null distribution</li>
</ul>
</div>
</div><div class="column" style="width:50%;">
<p><span style="color:blue;"><strong>Predictive</strong></span></p>
<div class="fragment">
<ul>
<li>Regression or classification?</li>
<li>Do a train/test split to evaluate model performance (Optional, do crossvalidation)</li>
<li>Select sensible performance metrics for the problem (from confusion matrix or regression metrics)</li>
<li>Maybe compare different models and tune hyperparameters</li>
<li>Do feature selection and feature engineering to improve the performance!</li>
</ul>
</div>
</div></div>
</section></section>
<section id="modeling-mindsets" class="title-slide slide level1 center">
<h1>Modeling Mindsets</h1>
<p><img data-src="img/ModelingMindsets_annotated.png" height="300"></p>
<p>Some methods:<br>
<strong>Linear Model:</strong> <span class="fragment" style="color:red;">Inferential</span> <span class="fragment" style="color:red;">and Predictive!</span><br>
<strong>Logistic Regression:</strong> <span class="fragment" style="color:red;">Inferential</span> <span class="fragment" style="color:red;">and Predictive!</span><br>
<strong>k-means Clustering:</strong> <span class="fragment" style="color:red;">Exploratory</span></p>
<p><span class="fragment" style="color:blue;"><strong>Let’s check your questions in the Course Organization Repo!</strong></span></p>
</section>

<section>
<section id="collaborative-work-with-git" class="title-slide slide level1 center">
<h1>Collaborative Work with Git</h1>
<p>Learning goal: First experiences with collaborative data science work with <code>git</code></p>
</section>
<section id="step-1-git-clone-project-y-usernames" class="slide level2 smaller">
<h2>Step 1: git clone <em>project-Y-USERNAMES</em></h2>
<p><span style="color:blue;">Team formation is mostly complete.</span> Repositories <code>project-1</code>, <code>FinalProject_2</code>, … are created. <strong>You are to deliver your project reports in your repository.</strong></p>
<ul>
<li>Find your project repository</li>
<li>Copy the URL<br>
<img data-src="img/clone-repo-link.png" height="150"></li>
<li>Go to RStudio
<ul>
<li>New Project &gt; Form Version Control &gt; Git &gt; Paste your URL</li>
<li>The project is created</li>
</ul></li>
</ul>
</section>
<section id="step-2-first-team-member-commits-and-pushes" class="slide level2 smaller">
<h2>Step 2: First Team member commits and pushes</h2>
<p><strong>One team member does the following:</strong></p>
<ul>
<li>Open the file <code>report.qmd</code></li>
<li>Write your name in the first line at <code>author</code> in the YAML</li>
<li><code>git add</code> the file <code>report.qmd</code></li>
<li><code>git commit</code> (enter “Added name” as commit message)</li>
<li><code>git push</code></li>
</ul>
</section>
<section id="step-3-other-team-members-pull" class="slide level2 smaller">
<h2>Step 3: Other team members pull</h2>
<ul>
<li>Do <code>git pull</code> in the RStudio interface.</li>
</ul>
<div class="columns">
<div class="column" style="width:60%;">
<p><strong>What does <code>git pull</code> do?</strong></p>
<ul>
<li><code>git pull</code> does two things: fetching new stuff and merging it with existing stuff
<ol type="1">
<li>First it <code>git fetch</code>s the commit from the remote repository (GitHub) to the local machine</li>
<li>Then it <code>git merge</code>s the commit with the latest commit on your local machine.</li>
</ol></li>
<li>When we are lucky this works with no problems. (Should be the case with new files.)</li>
</ul>
</div><div class="column" style="width:40%;">
<p><img data-src="https://files.mastodon.social/media_attachments/files/109/303/119/338/776/592/original/662a5e803a5e6c21.png"></p>
<p>Source: <a href="https://mastodon.social/@allison_horst/109303149552034159" class="uri">https://mastodon.social/@allison_horst/109303149552034159</a></p>
</div></div>
</section>
<section id="step-4-merge-independent-changes" class="slide level2 smaller">
<h2>Step 4: Merge independent changes</h2>
<p><span style="color:blue;">Git can merge changes in the same file when there are no conflicts.</span> Let’s try.</p>
<ul>
<li><strong>The second team member:</strong>
<ul>
<li>Add your name in the author section of the YAML, save the file, add the file in the Git pane and make a commit.</li>
<li>Save, add the file in the Git pane, commit with message “Next author name”, <strong>push.</strong></li>
</ul></li>
<li><strong>The third (or first) team member:</strong>
<ul>
<li>Change the title in the YAML to something meaningful (and also add your name if third team member), save the file, add the file in the Git pane and make a commit.</li>
<li>Try to <strong>push</strong>. You should receive an error. Read it carefully, often it tells you what to do. Here: Do <code>git pull</code> first. You cannot push because remotely there is a newer commit (the one your colleague just made).</li>
<li><strong>Pull.</strong> This should result in message about a <strong>successfull auto-merge</strong>. Check that <strong>both</strong> are there: Your line and the line of your colleague. <em>If you receive several hints instead, first read the next slide!</em></li>
</ul></li>
</ul>
</section>
<section id="git-configuration-for-divergent-branches" class="slide level2 smaller">
<h2>??? <code>git</code> configuration for divergent branches</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>If you pull for the first time in a local git repository, git may complain like this:</p>
<p><img data-src="img/gitconfigrebase_rstudio.png" height="200"></p>
<p>Read that carefully. It advises to configure with <code>git config pull.rebase false</code> as the default version.</p>
</div><div class="column" style="width:50%;">
<p><strong>How to do the configuration?</strong></p>
<ul>
<li>Copy the line <code>git config pull.rebase false</code> and close the window.</li>
<li>Go to the Terminal pane (not the console, the one besides that). This is a terminal not for R but to speak with the computer in general. Paste the command and press enter. Now you are done and your next <code>git pull</code> should work.</li>
</ul>
</div></div>

<aside><div>
<p>What is a <em>branch</em> and what a <em>rebase</em>? These are features of git well worth to learn but not now. Learn at <a href="http://happygitwithr.com" class="uri">http://happygitwithr.com</a></p>
</div></aside></section>
<section id="step-5-push-and-pull-the-other-way-round" class="slide level2 smaller">
<h2>Step 5: Push and pull the other way round</h2>
<ul>
<li><strong>The third/first member:</strong>
<ul>
<li>The successful merge creates a new commit, which you can directly push.</li>
<li><strong>Push.</strong></li>
</ul></li>
<li><strong>The second team member (and all others):</strong>
<ul>
<li><strong>Pull</strong> the changes of your colleague.</li>
</ul></li>
</ul>
<p>Practice a bit more pulling and pushing commits and check the merging.</p>
</section>
<section id="step-6-create-a-merge-conflict" class="slide level2 smaller">
<h2>Step 6: Create a merge conflict</h2>
<ul>
<li>First and second team members:
<ul>
<li>Write a different sentence after “Executive Summary.” in YAML <code>abstract:</code>.</li>
<li>Each <code>git add</code> and <code>git commit</code> on local machines.</li>
</ul></li>
<li>First member: <code>git push</code></li>
<li>Second member:
<ul>
<li><code>git pull</code>. That should result in a conflict. <em>If you receive several hints instead, first read the slide two slides before!</em></li>
<li>The conflict should show directly in the file with markings like this</li>
</ul></li>
</ul>
<p><code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code><br>
one option of text,<br>
<code>========</code> a separator,<br>
the other option, and<br>
<code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code>.</p>
</section>
<section id="step-7-solve-the-conflict" class="slide level2 smaller">
<h2>Step 7: Solve the conflict</h2>
<ul>
<li>The second member
<ul>
<li>You have to solve this conflict now!</li>
<li>Solving is by editing the text</li>
<li>Decide for an option or make a new text</li>
<li>Thereby, remove the <code>&gt;&gt;&gt;&gt;&gt;</code>,<code>=====</code>,<code>&lt;&lt;&lt;&lt;&lt;&lt;</code></li>
<li>When you are done: <code>git add</code>, <code>git commit</code>, and <code>git push</code>.</li>
</ul></li>
</ul>
<p>Now you know how to solve merge conflicts. Practice a bit in your team.</p>
<p><strong>Working in VSCode:</strong> The workflow is the same because it relies on git not on the editor of choice.</p>
</section>
<section id="advice-collaborative-work-with-git" class="slide level2 smaller">
<h2>Advice: Collaborative work with git</h2>
<ul>
<li>Whenever you start a work session: First <strong>pull</strong> to see if there is anything new. That way you reduce the need for merges.</li>
<li>Inform your colleagues when you pushed new commits.</li>
<li>Coordinate the work, e.g.&nbsp;discuss who works on what part and maybe when. However, git allows to also work without full coordination and in parallel.</li>
<li>When you finish your work session, end with pushing a <em>nice</em> commit. That means. The file should render. You made comments when there are loose ends and todo’s.</li>
<li>You can also use the <em>issues</em> section of the GitHub repository for things to do.</li>
<li>When you work on different parts of the file, be aware that also a successful merge can create problems. Example: Your colleague changed the data import, while you worked on graphics. Maybe after the merge the imported data is not what you need for your chunk. Then coordinate.<br>
</li>
<li>Commit and push often. This avoids that potential merge conflicts become large.</li>
</ul>
</section></section>
<section>
<section id="bootstrapping" class="title-slide slide level1 center">
<h1>Bootstrapping</h1>

</section>
<section id="purpose-quantify-uncertainty" class="slide level2 smaller">
<h2>Purpose: Quantify uncertainty</h2>
<ul>
<li><strong>Uncertainty</strong> is a central concern in <strong>inferential data analysis</strong>.</li>
<li>We want to <strong>estimate</strong> a <strong>parameter</strong> of a <strong>population</strong> from a <strong>sample</strong>.</li>
</ul>
<div class="fragment">
<p>Central inferential assumption:</p>
<ul>
<li>Our data is a <strong>random sample</strong> from the <strong>population</strong> we are interested in.
<ul>
<li>No <strong>selection biases</strong>.</li>
</ul></li>
</ul>
<p>Examples:</p>
<ul>
<li>We want to know <strong>average height</strong> of <strong>all people</strong> but we only have a sample of people.</li>
<li>We want know the <strong>mean estimate</strong> of all possible participants of the ox meat weigh guessing competition from the <strong>sample ballots</strong> of participants we have.</li>
<li>We want to learn something about penguins from the data of the penguins in <code>palmerpenguins::penguins</code></li>
</ul>
</div>
</section>
<section id="practical-example-galtons-data" class="slide level2 smaller">
<h2>Practical example: Galton’s Data</h2>
<p>Competition: Guess the weight of the meat of an Ox? (Galton, 1907)</p>
<p><em>What is the mean of all possible participants <span class="math inline">\(\mu\)</span>?</em></p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a></a><span class="fu">library</span>(readxl)</span>
<span id="cb3-2"><a></a>galton <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/galton.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 787 Columns: 2
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
dbl (2): Estimate, id

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a></a>galton <span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(Estimate)) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="W11_files/figure-html/unnamed-chunk-1-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The (arithmetic) mean of the 787 estimates is <span class="math inline">\(\hat\mu =\)</span> 1196.71.</p>
<p><em>How sure can we be that <span class="math inline">\(\hat\mu\)</span> is close to <span class="math inline">\(\mu\)</span> and how can we quantify?</em><sup>1</sup></p>
</div>
<aside><ol class="aside-footnotes"><li id="fn1"><p>We already assume that we have an unbiased sample of all possible participants!</p></li></ol></aside></section>
<section id="practical-example-palmer-penguins" class="slide level2 smaller">
<h2>Practical example: Palmer Penguins</h2>
<p>A linear model for body mass of penguins: <span class="math inline">\(y_i = \beta_0 + \beta_1 x_i + \dots + \beta_m x_m  + \varepsilon_i\)</span>.</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a><span class="fu">library</span>(tidymodels)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching packages ────────────────────────────────────── tidymodels 1.2.0 ──</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ broom        1.0.5     ✔ rsample      1.2.1
✔ dials        1.3.0     ✔ tune         1.2.1
✔ infer        1.0.7     ✔ workflows    1.1.4
✔ modeldata    1.3.0     ✔ workflowsets 1.1.0
✔ parsnip      1.2.1     ✔ yardstick    1.3.1
✔ recipes      1.1.0     </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Conflicts ───────────────────────────────────────── tidymodels_conflicts() ──
✖ scales::discard() masks purrr::discard()
✖ dplyr::filter()   masks stats::filter()
✖ recipes::fixed()  masks stringr::fixed()
✖ dplyr::lag()      masks stats::lag()
✖ yardstick::spec() masks readr::spec()
✖ recipes::step()   masks stats::step()
• Search for functions across packages at https://www.tidymodels.org/find/</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a></a><span class="fu">library</span>(palmerpenguins)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'palmerpenguins'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:modeldata':

    penguins</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a></a>peng_workflow <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">|&gt;</span> <span class="fu">add_recipe</span>(<span class="fu">recipe</span>(body_mass_g <span class="sc">~</span> ., <span class="at">data =</span> penguins) <span class="sc">|&gt;</span> <span class="fu">step_rm</span>(year)) <span class="sc">|&gt;</span> </span>
<span id="cb13-2"><a></a>  <span class="fu">add_model</span>(<span class="fu">linear_reg</span>() <span class="sc">|&gt;</span> <span class="fu">set_engine</span>(<span class="st">"lm"</span>))</span>
<span id="cb13-3"><a></a>peng_fit <span class="ot">&lt;-</span> peng_workflow <span class="sc">|&gt;</span> <span class="fu">fit</span>(<span class="at">data =</span> penguins)</span>
<span id="cb13-4"><a></a>peng_fit <span class="sc">|&gt;</span> <span class="fu">tidy</span>() <span class="sc">|&gt;</span> <span class="fu">mutate_if</span>(is.numeric, round, <span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 5
  term              estimate std.error statistic   p.value
  &lt;chr&gt;                &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept)        -1500.     576.      -2.61  0.00961  
2 speciesChinstrap    -260.      88.6     -2.94  0.00352  
3 speciesGentoo        988.     137.       7.20  0        
4 islandDream          -13.1     58.5     -0.224 0.823    
5 islandTorgersen      -48.1     60.9     -0.789 0.431    
6 bill_length_mm        18.2      7.14     2.55  0.0113   
7 bill_depth_mm         67.6     19.8      3.41  0.000734 
8 flipper_length_mm     16.2      2.94     5.52  0.0000001
9 sexmale              387.      48.1      8.04  0        </code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>The column <code>estimate</code> shows the coefficients <span class="math inline">\(\hat\beta_0, \hat\beta_1, \dots, \hat\beta_m\)</span> of the linear model for the variables named in <code>term</code></p>
<p><em>How sure can we be that the <span class="math inline">\(\hat\beta\)</span>’s are close to the <span class="math inline">\(\beta\)</span>’s we are interested in?</em><sup>1</sup></p>
</div>
<aside><ol class="aside-footnotes"><li id="fn2"><p>We already assume that we have an unbiased sample of all penguins!</p></li></ol></aside></section>
<section id="bootstrapping-idea" class="slide level2 smaller">
<h2>Bootstrapping<sup>1</sup> idea</h2>
<ol type="1">
<li>Take a <strong>bootstrap sample</strong>: a random sample taken with replacement from the original sample with the same size.</li>
<li>Calculate the <em>statistics</em> for the bootstrap sample.</li>
<li>Repeat steps 1. and 2. many times to create a <strong>bootstrap distribution</strong> - a distribution of bootstrap statistics</li>
<li>Use the bootstrap distribution to quantify the uncertainty.</li>
</ol>
<p>What is the statistic in the Galton example? <span class="fragment">The mean</span><br>
What are the statistics in the penguins example? <span class="fragment">The coefficients</span></p>
<aside><ol class="aside-footnotes"><li id="fn3"><p>The name comes from the saying “pull oneself up by one’s bootstrap”. It refers to the somehow <em>magical</em> idea that we can use our small sample to <em>mimic</em> the whole population.</p></li></ol></aside></section>
<section id="bootstrapping-in-practice" class="slide level2 smaller">
<h2>Bootstrapping in practice</h2>
<ul>
<li>You can do the bootstrapping procedure in various ways (including programming in base R or python).</li>
<li>We will use convenient functions from <code>rsample</code> form the <code>tidymodels</code> packages.</li>
</ul>
</section>
<section id="resamplings-galtons-data" class="slide level2 smaller">
<h2>Resamplings: Galton’s Data</h2>
<div class="columns">
<div class="column" style="width:35%;">
<p>The function <code>sample</code> selects <code>size</code> random elements from a vector <code>x</code> with or without <code>replace</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a></a><span class="fu">set.seed</span>(<span class="dv">224</span>)</span>
<span id="cb15-2"><a></a><span class="fu">sample</span>(galton<span class="sc">$</span>Estimate, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1177 1232 1242</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a></a><span class="fu">sample</span>(galton<span class="sc">$</span>Estimate, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1270 1440 1232</code></pre>
</div>
</div>
<p>For tibbles we can use <code>slice_sample</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a></a>galton <span class="sc">|&gt;</span> <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">3</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  Estimate    id
     &lt;dbl&gt; &lt;dbl&gt;
1     1189   320
2     1203   367
3     1181   278</code></pre>
</div>
</div>
</div><div class="column" style="width:35%;">
<div class="fragment">
<p>A <strong>bootstrap sample</strong> is with replace and of the same size as the original sample:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a></a><span class="fu">nrow</span>(galton)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 787</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a></a>galton <span class="sc">|&gt;</span> <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">787</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 787 × 2
   Estimate    id
      &lt;dbl&gt; &lt;dbl&gt;
 1     1347   774
 2     1221   489
 3     1112    85
 4     1320   766
 5     1266   697
 6     1145   149
 7     1271   711
 8     1215   442
 9     1238   596
10     1163   198
# ℹ 777 more rows</code></pre>
</div>
</div>
</div>
</div><div class="column" style="width:30%;">
<div class="fragment">
<p>Do some mean bootstrapping manually:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a></a>galton <span class="sc">|&gt;</span> <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">787</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb25-2"><a></a> <span class="fu">summarize</span>(<span class="fu">mean</span>(Estimate))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  `mean(Estimate)`
             &lt;dbl&gt;
1            1194.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a></a>galton <span class="sc">|&gt;</span> <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">787</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb27-2"><a></a> <span class="fu">summarize</span>(<span class="fu">mean</span>(Estimate))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  `mean(Estimate)`
             &lt;dbl&gt;
1            1197.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a></a>galton <span class="sc">|&gt;</span> <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">787</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb29-2"><a></a> <span class="fu">summarize</span>(<span class="fu">mean</span>(Estimate))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  `mean(Estimate)`
             &lt;dbl&gt;
1            1193.</code></pre>
</div>
</div>
</div>
</div></div>
</section>
<section id="bootstrap-set-galtons-data" class="slide level2 smaller">
<h2>Bootstrap set: Galton’s Data</h2>
<p>The function <code>bootstraps</code> from <code>rsample</code> does this type of bootstrapping for us.</p>
<div class="columns">
<div class="column" style="width:50%;">
<p>1,000 resamples:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a></a>boots_galton <span class="ot">&lt;-</span> galton <span class="sc">|&gt;</span> <span class="fu">bootstraps</span>(<span class="at">times =</span> <span class="dv">1000</span>)</span>
<span id="cb31-2"><a></a>boots_galton</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Bootstrap sampling 
# A tibble: 1,000 × 2
   splits            id           
   &lt;list&gt;            &lt;chr&gt;        
 1 &lt;split [787/295]&gt; Bootstrap0001
 2 &lt;split [787/293]&gt; Bootstrap0002
 3 &lt;split [787/296]&gt; Bootstrap0003
 4 &lt;split [787/303]&gt; Bootstrap0004
 5 &lt;split [787/283]&gt; Bootstrap0005
 6 &lt;split [787/295]&gt; Bootstrap0006
 7 &lt;split [787/295]&gt; Bootstrap0007
 8 &lt;split [787/285]&gt; Bootstrap0008
 9 &lt;split [787/291]&gt; Bootstrap0009
10 &lt;split [787/275]&gt; Bootstrap0010
# ℹ 990 more rows</code></pre>
</div>
</div>
<p>The column <code>splits</code> contains a list of split objects.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a></a>boots_galton<span class="sc">$</span>splits[[<span class="dv">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;Analysis/Assess/Total&gt;
&lt;787/295/787&gt;</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="fragment">
<p>From each split we can extract the bootstrapped resample with <code>analysis</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a></a>boots_galton<span class="sc">$</span>splits[[<span class="dv">1</span>]] <span class="sc">|&gt;</span> <span class="fu">analysis</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 787 × 2
   Estimate    id
      &lt;dbl&gt; &lt;dbl&gt;
 1     1160   192
 2     1260   678
 3     1147   153
 4     1221   484
 5     1204   373
 6     1165   211
 7     1112    85
 8     1415   780
 9     1081    43
10     1168   220
# ℹ 777 more rows</code></pre>
</div>
</div>
<p>(The <code>assessment</code> set contains the observations that were not selected randomly in the resample. We do not use it in the following.)</p>
</div>
</div></div>
</section>
<section id="bootstrap-distribution-galtons-data" class="slide level2 smaller">
<h2>Bootstrap distribution: Galton’s Data</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>We iterate with a <code>map</code> function<sup>1</sup> over the splits and extract the analysis set and calculate the mean.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a></a>boots_galton_mean <span class="ot">&lt;-</span> boots_galton <span class="sc">|&gt;</span> </span>
<span id="cb37-2"><a></a>  <span class="fu">mutate</span>(</span>
<span id="cb37-3"><a></a>   <span class="at">mean =</span> <span class="fu">map_dbl</span>(splits, </span>
<span id="cb37-4"><a></a>                  \(x) <span class="fu">analysis</span>(x)<span class="sc">$</span>Estimate <span class="sc">|&gt;</span> <span class="fu">mean</span>()))</span>
<span id="cb37-5"><a></a>boots_galton_mean</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Bootstrap sampling 
# A tibble: 1,000 × 3
   splits            id             mean
   &lt;list&gt;            &lt;chr&gt;         &lt;dbl&gt;
 1 &lt;split [787/295]&gt; Bootstrap0001 1194.
 2 &lt;split [787/293]&gt; Bootstrap0002 1196.
 3 &lt;split [787/296]&gt; Bootstrap0003 1199.
 4 &lt;split [787/303]&gt; Bootstrap0004 1196.
 5 &lt;split [787/283]&gt; Bootstrap0005 1194.
 6 &lt;split [787/295]&gt; Bootstrap0006 1197.
 7 &lt;split [787/295]&gt; Bootstrap0007 1195.
 8 &lt;split [787/285]&gt; Bootstrap0008 1194.
 9 &lt;split [787/291]&gt; Bootstrap0009 1197.
10 &lt;split [787/275]&gt; Bootstrap0010 1193.
# ℹ 990 more rows</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="fragment">
<p>Plot the bootstrap distribution of the mean.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a></a>boots_galton_mean <span class="sc">|&gt;</span> </span>
<span id="cb39-2"><a></a> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> mean)) <span class="sc">+</span> <span class="fu">geom_histogram</span>() <span class="sc">+</span></span>
<span id="cb39-3"><a></a> <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">24</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="W11_files/figure-html/unnamed-chunk-11-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div class="fragment">
<p>Compare distribution of estimates</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a></a>galton <span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(Estimate)) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb41-2"><a></a> <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">24</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="W11_files/figure-html/unnamed-chunk-12-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div></div>
<aside><ol class="aside-footnotes"><li id="fn4"><p>Here we use <code>map_dbl</code> which iterates over the list of splits and reports the values as a vector of doubles (numbers), the default of <code>map</code> would be to report also a list.</p></li></ol></aside></section>
<section id="quantify-uncertainty-standard-error" class="slide level2 smaller">
<h2>Quantify uncertainty? Standard error</h2>
<p>Compute the standard deviation of the bootstrap distribution.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a></a><span class="fu">sd</span>(boots_galton_mean<span class="sc">$</span>mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.732243</code></pre>
</div>
</div>
<div class="fragment">
<p>The standard deviation of the bootstrap distribution is called the <strong>standard error</strong> of the statistic.</p>
<p><span style="color:red;">Do not confuse standard error (of a statistic) and standard deviation (of a variable).</span></p>
<p>The <strong>standard error of the mean</strong> can also be estimated directly from the original sample <span class="math inline">\(x\)</span> as <span class="math inline">\(\frac{\text{sd}(x)}{\sqrt{n}}\)</span> where <span class="math inline">\(n\)</span> is the sample size.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a></a><span class="fu">sd</span>(galton<span class="sc">$</span>Estimate) <span class="sc">/</span> <span class="fu">sqrt</span>(<span class="fu">nrow</span>(galton))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.623085</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p><span style="color:blue;">Insight:</span> The standard error decreases with sample size! However, it decreases only with the square root of the sample size.</p>
<p><span style="color:blue;">Question:</span> You want to shrink the standard error by half. How much larger does the sample size need to be? <span class="fragment">4 times</span></p>
</div>
</section>
<section id="confidence-interval" class="slide level2 smaller">
<h2>Confidence interval</h2>
<p>Another way to quantify uncertainty is to compute a <strong>confidence interval</strong> (CI) for a certain <strong>confidence level</strong>:<br>
The true value of the statistic is expected to lie with the CI with certain probability (the confidence level).</p>
<div class="fragment">
<div class="columns">
<div class="column" style="width:30%;">
<p>Compute the 95% confidence interval of the bootstrap distribution with <code>quantile</code>-functions:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a></a>boots_galton_mean <span class="sc">|&gt;</span> </span>
<span id="cb46-2"><a></a>  <span class="fu">summarize</span>(</span>
<span id="cb46-3"><a></a>    <span class="at">lower =</span> <span class="fu">quantile</span>(mean, <span class="fl">0.025</span>),</span>
<span id="cb46-4"><a></a>    <span class="at">upper =</span> <span class="fu">quantile</span>(mean, <span class="fl">0.975</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  lower upper
  &lt;dbl&gt; &lt;dbl&gt;
1 1191. 1202.</code></pre>
</div>
</div>
</div><div class="column" style="width:60%;">
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a></a>boots_galton_mean <span class="sc">|&gt;</span> </span>
<span id="cb48-2"><a></a> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> mean)) <span class="sc">+</span> <span class="fu">geom_histogram</span>() <span class="sc">+</span></span>
<span id="cb48-3"><a></a> <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fu">quantile</span>(boots_galton_mean<span class="sc">$</span>mean, <span class="fl">0.025</span>), <span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb48-4"><a></a> <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fu">quantile</span>(boots_galton_mean<span class="sc">$</span>mean, <span class="fl">0.975</span>), <span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb48-5"><a></a> <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="dv">1197</span>, <span class="at">y =</span> <span class="dv">10</span>, <span class="at">label =</span> <span class="st">"95% of estimates"</span>, <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="fu">unit</span>(<span class="dv">12</span>, <span class="st">"pt"</span>)) <span class="sc">+</span></span>
<span id="cb48-6"><a></a> <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">24</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="W11_files/figure-html/unnamed-chunk-16-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div></div>
</div>
</section>
<section id="confidence-interval-meaning" class="slide level2 smaller">
<h2>Confidence Interval: Meaning</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a></a>boots_galton_mean <span class="sc">|&gt;</span> </span>
<span id="cb50-2"><a></a>  <span class="fu">summarize</span>(</span>
<span id="cb50-3"><a></a>    <span class="at">lower =</span> <span class="fu">quantile</span>(mean, <span class="fl">0.025</span>),</span>
<span id="cb50-4"><a></a>    <span class="at">upper =</span> <span class="fu">quantile</span>(mean, <span class="fl">0.975</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  lower upper
  &lt;dbl&gt; &lt;dbl&gt;
1 1191. 1202.</code></pre>
</div>
</div>
<p>What is the correct interpretation?</p>
<ol type="1">
<li>95% of the estimates in this sample lie between 1191 and 1202.</li>
<li>We are 95% confident that the mean estimate of all potential participants is between 1191 and 1202.</li>
<li>We are 95% confident that the mean estimate of this sample is between 1191 and 1202.</li>
</ol>
<div class="fragment">
<p>Correct: 2.<br>
1. The confidence is about a parameter (here the population mean) not about sample values!<br>
3. We know the mean of the sample precisely!<br>
The confidence interval assesses where 95% of the values are when do new samples.</p>
</div>
</section>
<section id="ci-precision-vs.-confidence" class="slide level2 smaller">
<h2>CI: Precision vs.&nbsp;Confidence</h2>
<ul>
<li>Can’t we increase the confidence level to 99% to get a more precise estimate with a more narrow confidence interval?</li>
</ul>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a></a>boots_galton_mean <span class="sc">|&gt;</span> </span>
<span id="cb52-2"><a></a>  <span class="fu">summarize</span>(</span>
<span id="cb52-3"><a></a>    <span class="at">lower =</span> <span class="fu">quantile</span>(mean, <span class="fl">0.005</span>),</span>
<span id="cb52-4"><a></a>    <span class="at">upper =</span> <span class="fu">quantile</span>(mean, <span class="fl">0.995</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  lower upper
  &lt;dbl&gt; &lt;dbl&gt;
1 1190. 1204.</code></pre>
</div>
</div>
<p><span style="color:red;">No, it is the other way round:</span> The smaller and more precise the confidence interval, the lower must the confidence level be.</p>
</div>
</section>
<section id="bootstrap-linear-model-coefficients" class="slide level2 smaller">
<h2>Bootstrap linear model coefficients</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a></a>peng_workflow <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">|&gt;</span> <span class="fu">add_recipe</span>(<span class="fu">recipe</span>(body_mass_g <span class="sc">~</span> ., <span class="at">data =</span> penguins) <span class="sc">|&gt;</span> <span class="fu">step_rm</span>(year)) <span class="sc">|&gt;</span> </span>
<span id="cb54-2"><a></a>  <span class="fu">add_model</span>(<span class="fu">linear_reg</span>() <span class="sc">|&gt;</span> <span class="fu">set_engine</span>(<span class="st">"lm"</span>))</span>
<span id="cb54-3"><a></a>peng_fit <span class="ot">&lt;-</span> peng_workflow <span class="sc">|&gt;</span> <span class="fu">fit</span>(<span class="at">data =</span> penguins)</span>
<span id="cb54-4"><a></a>peng_fit <span class="sc">|&gt;</span> <span class="fu">tidy</span>() <span class="sc">|&gt;</span> <span class="fu">mutate_if</span>(is.numeric, round, <span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 5
  term              estimate std.error statistic   p.value
  &lt;chr&gt;                &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept)        -1500.     576.      -2.61  0.00961  
2 speciesChinstrap    -260.      88.6     -2.94  0.00352  
3 speciesGentoo        988.     137.       7.20  0        
4 islandDream          -13.1     58.5     -0.224 0.823    
5 islandTorgersen      -48.1     60.9     -0.789 0.431    
6 bill_length_mm        18.2      7.14     2.55  0.0113   
7 bill_depth_mm         67.6     19.8      3.41  0.000734 
8 flipper_length_mm     16.2      2.94     5.52  0.0000001
9 sexmale              387.      48.1      8.04  0        </code></pre>
</div>
</div>
<div class="fragment">
<p>Let us now bootstrap whole models instead of just mean values!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a></a><span class="co"># A function to fit a model to a bootstrap sample and tidy the coefficients</span></span>
<span id="cb56-2"><a></a>fit_split <span class="ot">&lt;-</span> <span class="cf">function</span>(split) peng_workflow <span class="sc">|&gt;</span> <span class="fu">fit</span>(<span class="at">data =</span> <span class="fu">analysis</span>(split)) <span class="sc">|&gt;</span> <span class="fu">tidy</span>() </span>
<span id="cb56-3"><a></a><span class="co"># Make 1000 bootstrap samples and fit a model to each</span></span>
<span id="cb56-4"><a></a>boots_peng <span class="ot">&lt;-</span> <span class="fu">bootstraps</span>(penguins, <span class="at">times =</span> <span class="dv">1000</span>) <span class="sc">|&gt;</span> </span>
<span id="cb56-5"><a></a>  <span class="fu">mutate</span>(<span class="at">coefs =</span> <span class="fu">map</span>(splits, fit_split))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="bootstrap-data-frame" class="slide level2 smaller scrollable">
<h2>Bootstrap data frame</h2>
<p>Now we have a column <code>coefs</code> with a list of data frames, each containing the fitted coefficients.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a></a>boots_peng</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Bootstrap sampling 
# A tibble: 1,000 × 3
   splits            id            coefs           
   &lt;list&gt;            &lt;chr&gt;         &lt;list&gt;          
 1 &lt;split [344/125]&gt; Bootstrap0001 &lt;tibble [9 × 5]&gt;
 2 &lt;split [344/131]&gt; Bootstrap0002 &lt;tibble [9 × 5]&gt;
 3 &lt;split [344/123]&gt; Bootstrap0003 &lt;tibble [9 × 5]&gt;
 4 &lt;split [344/116]&gt; Bootstrap0004 &lt;tibble [9 × 5]&gt;
 5 &lt;split [344/130]&gt; Bootstrap0005 &lt;tibble [9 × 5]&gt;
 6 &lt;split [344/126]&gt; Bootstrap0006 &lt;tibble [9 × 5]&gt;
 7 &lt;split [344/126]&gt; Bootstrap0007 &lt;tibble [9 × 5]&gt;
 8 &lt;split [344/129]&gt; Bootstrap0008 &lt;tibble [9 × 5]&gt;
 9 &lt;split [344/129]&gt; Bootstrap0009 &lt;tibble [9 × 5]&gt;
10 &lt;split [344/129]&gt; Bootstrap0010 &lt;tibble [9 × 5]&gt;
# ℹ 990 more rows</code></pre>
</div>
</div>
<p>We can <code>unnest</code> the list column to make a much longer but unnested data frame:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a></a>boots_peng <span class="sc">|&gt;</span> <span class="fu">unnest</span>(coefs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9,000 × 7
   splits            id            term    estimate std.error statistic  p.value
   &lt;list&gt;            &lt;chr&gt;         &lt;chr&gt;      &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
 1 &lt;split [344/125]&gt; Bootstrap0001 (Inter… -1972.      630.     -3.13   1.91e- 3
 2 &lt;split [344/125]&gt; Bootstrap0001 specie…  -294.       94.9    -3.10   2.09e- 3
 3 &lt;split [344/125]&gt; Bootstrap0001 specie…   958.      137.      6.97   1.84e-11
 4 &lt;split [344/125]&gt; Bootstrap0001 island…    -1.14     57.7    -0.0197 9.84e- 1
 5 &lt;split [344/125]&gt; Bootstrap0001 island…   -71.9      61.8    -1.16   2.45e- 1
 6 &lt;split [344/125]&gt; Bootstrap0001 bill_l…    22.3       8.00    2.78   5.68e- 3
 7 &lt;split [344/125]&gt; Bootstrap0001 bill_d…    80.1      20.6     3.88   1.26e- 4
 8 &lt;split [344/125]&gt; Bootstrap0001 flippe…    16.8       3.00    5.61   4.40e- 8
 9 &lt;split [344/125]&gt; Bootstrap0001 sexmale   353.       51.2     6.89   2.94e-11
10 &lt;split [344/131]&gt; Bootstrap0002 (Inter… -1945.      585.     -3.33   9.82e- 4
# ℹ 8,990 more rows</code></pre>
</div>
</div>
</section>
<section id="some-coefficient-distributions" class="slide level2 smaller">
<h2>Some coefficient distributions</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a></a><span class="fu">library</span>(patchwork)</span>
<span id="cb61-2"><a></a>g1 <span class="ot">&lt;-</span> boots_peng <span class="sc">|&gt;</span> <span class="fu">unnest</span>(coefs) <span class="sc">|&gt;</span> <span class="fu">filter</span>(term <span class="sc">==</span> <span class="st">"islandDream"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb61-3"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> estimate)) <span class="sc">+</span> <span class="fu">geom_histogram</span>() <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">"coefficients islandDream"</span>) <span class="sc">+</span></span>
<span id="cb61-4"><a></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">"gray"</span>) <span class="sc">+</span> <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">24</span>)</span>
<span id="cb61-5"><a></a>g2 <span class="ot">&lt;-</span> boots_peng <span class="sc">|&gt;</span> <span class="fu">unnest</span>(coefs) <span class="sc">|&gt;</span> <span class="fu">filter</span>(term <span class="sc">==</span> <span class="st">"bill_length_mm"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb61-6"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> estimate)) <span class="sc">+</span> <span class="fu">geom_histogram</span>() <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">"coefficients bill_length_mm"</span>) <span class="sc">+</span></span>
<span id="cb61-7"><a></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">"gray"</span>) <span class="sc">+</span> <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">24</span>)</span>
<span id="cb61-8"><a></a>g3 <span class="ot">&lt;-</span> boots_peng <span class="sc">|&gt;</span> <span class="fu">unnest</span>(coefs) <span class="sc">|&gt;</span> <span class="fu">filter</span>(term <span class="sc">==</span> <span class="st">"flipper_length_mm"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb61-9"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> estimate)) <span class="sc">+</span> <span class="fu">geom_histogram</span>() <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">"coefficients flipper_length_mm"</span>) <span class="sc">+</span></span>
<span id="cb61-10"><a></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">"gray"</span>) <span class="sc">+</span> <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">24</span>)</span>
<span id="cb61-11"><a></a>g1 <span class="sc">+</span> g2 <span class="sc">+</span> g3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>

</div>
<img data-src="W11_files/figure-html/unnamed-chunk-23-1.png" width="1728" class="r-stretch"><ul>
<li>We could derive <em>bootstrapped p-values</em> from these distributions.</li>
</ul>
</section>
<section id="computed-p-values-from-each-fit" class="slide level2 smaller">
<h2>computed p-values from each fit</h2>
<ul>
<li>Each bootstrap fit also delivers computed p-values for each coefficient.<sup>1</sup></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a></a>g1 <span class="ot">&lt;-</span> boots_peng <span class="sc">|&gt;</span> <span class="fu">unnest</span>(coefs) <span class="sc">|&gt;</span> <span class="fu">filter</span>(term <span class="sc">==</span> <span class="st">"islandDream"</span>) <span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> p.value)) <span class="sc">+</span> <span class="fu">geom_histogram</span>() <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">"coefficients islandDream"</span>) <span class="sc">+</span> <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">24</span>)</span>
<span id="cb63-2"><a></a>g2 <span class="ot">&lt;-</span> boots_peng <span class="sc">|&gt;</span> <span class="fu">unnest</span>(coefs) <span class="sc">|&gt;</span> <span class="fu">filter</span>(term <span class="sc">==</span> <span class="st">"bill_length_mm"</span>) <span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> p.value)) <span class="sc">+</span> <span class="fu">geom_histogram</span>() <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">"coefficients bill_length_mm"</span>) <span class="sc">+</span> <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">24</span>)</span>
<span id="cb63-3"><a></a>g3 <span class="ot">&lt;-</span> boots_peng <span class="sc">|&gt;</span> <span class="fu">unnest</span>(coefs) <span class="sc">|&gt;</span> <span class="fu">filter</span>(term <span class="sc">==</span> <span class="st">"flipper_length_mm"</span>) <span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> p.value)) <span class="sc">+</span> <span class="fu">geom_histogram</span>() <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">"coefficients flipper_length_mm"</span>) <span class="sc">+</span> <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">24</span>)</span>
<span id="cb63-4"><a></a>g1 <span class="sc">+</span> g2 <span class="sc">+</span> g3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="W11_files/figure-html/unnamed-chunk-24-1.png" width="1728"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>computed p-values in resamples vary widely (see <code>islandDream</code>) when <em>bootstrapped p-values</em> show insignificance.</li>
</ul>
<aside><ol class="aside-footnotes"><li id="fn5"><p>These are computed based on theoretical assumptions with the help of t-tests and t-distributions.</p></li></ol></aside></section></section>
<section>
<section id="cross-validation-another-resampling-method" class="title-slide slide level1 center">
<h1>Cross validation: Another resampling method</h1>

</section>
<section id="how-to-evaluate-performance-on-training-data-only" class="slide level2 smaller">
<h2>How to evaluate performance on training data only?</h2>
<ul>
<li>Model performance changes with the random selection of the training data. How can we then reliably compare models?</li>
<li>Anyway, the training data is not a good source for model performance. It is not an independent piece of information. Predicting the training data only reveals what the model already “knows”.</li>
<li>Also, we should save the testing data only for the final validation, so we should not use it systematically to compare models.</li>
</ul>
<p>A solution: <strong>Cross validation</strong></p>
</section>
<section id="cross-validation" class="slide level2 smaller">
<h2>Cross validation</h2>
<p>More specifically, <strong><span class="math inline">\(v\)</span>-fold cross validation</strong>:</p>
<ul>
<li>Shuffle your data and make a partition with <span class="math inline">\(v\)</span> parts
<ul>
<li>Recall from set theory: A <strong>partition</strong> is a division of a set into mutually disjoint parts which union cover the whole set. Here applied to observations (rows) in a data frame.</li>
</ul></li>
<li>Use 1 part for validation, and the remaining <span class="math inline">\(v-1\)</span> parts for training</li>
<li>Repeat <span class="math inline">\(v\)</span> times</li>
</ul>
</section>
<section id="cross-validation-1" class="slide level2">
<h2>Cross validation</h2>

<img data-src="img/cross-validation.png" class="r-stretch"></section></section>
<section>
<section id="wisdom-of-the-crowd-bias-and-diversity" class="title-slide slide level1 center">
<h1>Wisdom of the crowd, Bias and Diversity</h1>

</section>
<section id="galtons-data" class="slide level2 smaller">
<h2>Galton’s data</h2>
<p><em>What is the weight of the meat of this ox?</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a></a>galton <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/galton.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 787 Columns: 2
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
dbl (2): Estimate, id

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a></a>galton <span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(Estimate)) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">5</span>) <span class="sc">+</span> <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">1198</span>, <span class="at">color =</span> <span class="st">"green"</span>) <span class="sc">+</span> </span>
<span id="cb67-2"><a></a> <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fu">mean</span>(galton<span class="sc">$</span>Estimate), <span class="at">color =</span> <span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="W11_files/figure-html/unnamed-chunk-25-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
<p>787 estimates, <span style="color:green;">true value</span> 1198, <span style="color:red;">mean</span> 1196.7</p>

<aside><div>
<p>We focus on the arithmetic mean as aggregation function for the wisdom of the crowd here.</p>
</div></aside></section>
<section id="rmse-galtons-data" class="slide level2 smaller">
<h2>RMSE Galton’s data</h2>
<p>Describe the estimation game as a predictive model:</p>
<ul>
<li>All <em>estimates</em> are made to predict the same value: the truth.
<ul>
<li>In contrast to the regression model, the estimate come from people and not from a regression formula.</li>
</ul></li>
<li>The <em>truth</em> is the same for all.
<ul>
<li>In contrast to the regression model, the truth is one value and not a value for each prediction</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a></a>rmse_galton <span class="ot">&lt;-</span> galton <span class="sc">|&gt;</span> </span>
<span id="cb68-2"><a></a> <span class="fu">mutate</span>(<span class="at">true_value =</span> <span class="dv">1198</span>) <span class="sc">|&gt;</span></span>
<span id="cb68-3"><a></a> <span class="fu">rmse</span>(<span class="at">truth =</span> true_value, Estimate)</span>
<span id="cb68-4"><a></a>rmse_galton</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  .metric .estimator .estimate
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
1 rmse    standard        73.6</code></pre>
</div>
</div>
<!-- ## Regression vs. crowd estimation {.smaller} -->
<!-- The linear regression and the crowd estimation problems are similar but not identical! -->
<!-- |Variable      | Linear Regression Model                       | Crowd estimation -->
<!-- |--------------|-----------------------------------------------|-------------------------------------------- -->
<!-- | $y_i$        | Data point of response variable               | True value, uniform for all estimators $y_i = y$ -->
<!-- | $\hat{y}_i$  | Predicted value $\hat{y}_i=b_0+b_1+x_1+\dots$ | Estimate of one estimator -->
<!-- | $\bar{y}$    | Mean of response variable                     | Mean of estimates  -->
</section>
<section id="mse-variance-and-bias-of-estimates" class="slide level2 smaller">
<h2>MSE, Variance, and Bias of estimates</h2>
<p>In a crowd estimation, <span class="math inline">\(n\)</span> estimators delivered the estimates <span class="math inline">\(\hat{y}_1,\dots,\hat{y}_n\)</span>. Let us look at the following measures</p>
<ul>
<li><p><span class="math inline">\(\bar{y} = \frac{1}{n}\sum_{i = 1}^n \hat{y}_i^2\)</span> is the mean estimate, it is the aggregated estimate of the crowd</p></li>
<li><p><span class="math inline">\(\text{MSE} = \text{RMSE}^2 = \frac{1}{n}\sum_{i = 1}^n (\text{truth} - \hat{y}_i)^2\)</span></p></li>
<li><p><span class="math inline">\(\text{Variance} = \frac{1}{n}\sum_{i = 1}^n (\hat{y}_i - \bar{y})^2\)</span></p></li>
<li><p><span class="math inline">\(\text{Bias-squared} = (\bar{y} - \text{truth})^2\)</span> which is the square difference between truth and mean estimate.</p></li>
</ul>
<p>There is a mathematical relation (a math exercise to check):</p>
<p><span class="math display">\[\text{MSE} = \text{Bias-squared} + \text{Variance}\]</span></p>
</section>
<section id="testing-for-galtons-data" class="slide level2 smaller">
<h2>Testing for Galton’s data</h2>
<p><span class="math display">\[\text{MSE} = \text{Bias-squared} + \text{Variance}\]</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a></a>MSE <span class="ot">&lt;-</span> (rmse_galton<span class="sc">$</span>.estimate)<span class="sc">^</span><span class="dv">2</span> </span>
<span id="cb70-2"><a></a>MSE</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5409.795</code></pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a></a>Variance <span class="ot">&lt;-</span> <span class="fu">var</span>(galton<span class="sc">$</span>Estimate)<span class="sc">*</span>(<span class="fu">nrow</span>(galton)<span class="sc">-</span><span class="dv">1</span>)<span class="sc">/</span><span class="fu">nrow</span>(galton)</span>
<span id="cb72-2"><a></a><span class="co"># Note, we had to correct for the divisor (n-1) in the classical statistical definition</span></span>
<span id="cb72-3"><a></a><span class="co"># to get the sample variance instead of the estimate for the population variance</span></span>
<span id="cb72-4"><a></a>Variance</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5408.132</code></pre>
</div>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a></a>Bias_squared <span class="ot">&lt;-</span> (<span class="fu">mean</span>(galton<span class="sc">$</span>Estimate) <span class="sc">-</span> <span class="dv">1198</span>)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb74-2"><a></a>Bias_squared</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.663346</code></pre>
</div>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a></a>Bias_squared <span class="sc">+</span> Variance</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5409.795</code></pre>
</div>
</div>

<aside><div>
<p>Such nice mathematical properties are probably one reason why these squared measures are so popular.</p>
</div></aside></section>
<section id="the-diversity-prediction-theorem" class="slide level2 smaller">
<h2>The diversity prediction theorem<sup>1</sup></h2>
<ul>
<li><em>MSE</em> is a measure for the average <strong>individuals error</strong></li>
<li><em>Bias-squared</em> is a measure for the <strong>collective error</strong></li>
<li><em>Variance</em> is a measure for the <strong>diversity</strong> of estimates around the mean estimate</li>
</ul>
<p>The mathematical relation <span class="math display">\[\text{MSE} = \text{Bias-squared} + \text{Variance}\]</span> can be formulated as</p>
<p><strong>Collective error = Individual error - Diversity</strong></p>
<p>Interpretation: <em>The higher the diversity the lower the collective error!</em></p>
<aside><ol class="aside-footnotes"><li id="fn6"><p>Notion from: Page, S. E. (2007). The Difference: How the Power of Diversity Creates Better Groups, Firms, Schools, and Societies. Princeton University Press.</p></li></ol></aside></section>
<section id="why-is-this-message-a-bit-suggestive" class="slide level2 smaller">
<h2>Why is this message a bit suggestive?</h2>
<p>The mathematical relation <span class="math display">\[\text{MSE} = \text{Bias-squared} + \text{Variance}\]</span> can be formulated as</p>
<p><strong>Collective error = Individual error - Diversity</strong></p>
<p>Interpretation: <em>The higher the diversity the lower the collective error!</em></p>
<div class="fragment">
<ul>
<li><span class="math inline">\(\text{MSE}\)</span> and <span class="math inline">\(\text{Variance}\)</span> are not independent!</li>
<li>Activities to increase diversity (Variance) typically also increase the average individual error (MSE).</li>
<li>For example, if we just add more random estimates with same mean but wild variance to our sample we increase both and do not gain any decrease of the collective error.</li>
</ul>
</div>
</section>
<section id="accuracy-for-numerical-estimate" class="slide level2 smaller">
<h2>Accuracy for numerical estimate</h2>
<ul>
<li>For binary classifiers <strong>accuracy</strong> has a simple definition: Fraction of correct classifications.
<ul>
<li>It can be further informed by other more specific measures taken from the confusion matrix (sensitivity, specificity)</li>
</ul></li>
</ul>
<p>How about numerical estimators?<br>
For example outcomes of estimation games, or linear regression models?</p>
<div class="fragment">
<ul>
<li>Accuracy is for example measured by (R)MSE</li>
<li><span class="math inline">\(\text{MSE} = \text{Bias-squared} + \text{Variance}\)</span> shows us that we can make a<br>
<strong>bias-variance decomposition</strong></li>
<li>That means some part of the error is a systematic (the bias) and another part due to random variation (the variance).</li>
<li>The bias-variance tradeoff is also an important concept in statistical learning!</li>
</ul>
</div>
</section>
<section id="d-accuracy-trueness-and-precision" class="slide level2 smaller">
<h2>2-d Accuracy: Trueness and Precision</h2>
<p>According to ISO 5725-1 Standard: <em>Accuracy (trueness and precision) of measurement methods and results - Part 1: General principles and definitions.</em> there are two dimension of accuracy of numerical measurement.</p>
<p><img data-src="https://upload.wikimedia.org/wikipedia/commons/9/92/Accuracy_%28trueness_and_precision%29.svg"> <img data-src="img/accuracy_trueness_precision.png" height="300"></p>
</section>
<section id="what-is-a-wise-crowd" class="slide level2 smaller">
<h2>What is a wise crowd?</h2>
<p>Assume the dots are estimates. <strong>Which is a wise crowd?</strong></p>
<p><img data-src="img/accuracy_trueness_precision.png" height="300"></p>
<div class="fragment">
<ul>
<li>Of course, high trueness and high precision! But, …</li>
<li>Focusing on the <strong>crowd</strong> being wise instead of its <strong>individuals</strong>: High trueness, low precision.</li>
</ul>
</div>
</section></section>
<section id="bias-variance-trade-off-in-a-script" class="title-slide slide level1 center">
<h1>Bias-variance trade-off in a script</h1>
<p><code>penguins_bias_variance.R</code></p>

<div class="quarto-auto-generated-content">
<p><img src="img/ConstructorUniversity.png" class="slide-logo"></p>
<div class="footer footer-default">
<p>MDSSB-DSCO-02: Data Science Concepts</p>
</div>
</div>
</section>


    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="site_libs/revealjs/plugin/search/search.js"></script>
  <script src="site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': true,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: true,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp("https:\/\/CU-F24-MDSSB-01-Concepts-Tools\.github\.io\/Website\/");
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>