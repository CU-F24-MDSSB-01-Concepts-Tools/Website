<!DOCTYPE html>
<html lang="en"><head>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/tabby.min.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.5.56">

  <meta name="author" content="Jan Lorenz">
  <title>Data Science Concepts / Data Science Tools – W#10: p-value, Decision Trees, RMSE, Overfitting, Bias-Variance in Crowd Wisdom</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="site_libs/revealjs/dist/theme/quarto.css">
  <link href="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">W#10: p-value, Decision Trees, RMSE, Overfitting, Bias-Variance in Crowd Wisdom</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Jan Lorenz 
</div>
</div>
</div>

</section><section id="TOC">
<nav role="doc-toc"> 
<h2 id="toc-title">Table of contents</h2>
<ul>
<li><a href="#/hypothesis-testing-and-the-p-value" id="/toc-hypothesis-testing-and-the-p-value">Hypothesis testing and the p-value</a></li>
<li><a href="#/classification-compare-logistic-regression-and-decision-tree" id="/toc-classification-compare-logistic-regression-and-decision-tree">Classification: Compare logistic regression and decision tree</a></li>
<li><a href="#/what-is-a-model-terminological-confusion" id="/toc-what-is-a-model-terminological-confusion">What is a model? Terminological confusion…</a></li>
<li><a href="#/regression-compare-linear-regression-and-decision-tree" id="/toc-regression-compare-linear-regression-and-decision-tree">Regression: Compare linear regression and decision tree</a></li>
<li><a href="#/overfitting-with-decision-trees" id="/toc-overfitting-with-decision-trees">Overfitting with decision trees</a></li>
<li><a href="#/the-wisdom-of-the-crowd-diversity-and-the-bias-variance-decomposition" id="/toc-the-wisdom-of-the-crowd-diversity-and-the-bias-variance-decomposition">The wisdom of the crowd, “Diversity!”, and the Bias-Variance-Decomposition</a></li>
</ul>
</nav>
</section>
<section>
<section id="hypothesis-testing-and-the-p-value" class="title-slide slide level1 center">
<h1>Hypothesis testing and the p-value</h1>
<p>Large part of the content adapted from <a href="http://datasciencebox.org" class="uri">http://datasciencebox.org</a>.</p>
</section>
<section id="organ-donors" class="slide level2 smaller">
<h2>Organ donors</h2>
<p><strong>Consultant:</strong><br>
<em>I can help find a liver donor for your transplant surgery. From my donating clients only 4.8% (3 out of 62) had complications which is way below the national average of 10%!</em></p>
<p><strong>Question:</strong> <em>Is this evidence that the consultant’s work meaningfully contributes to reducing complications?</em></p>
<h3 id="correlation-vs.-causation">Correlation vs.&nbsp;causation</h3>
<p><strong>Epistemologic question:</strong> <em>Is it possible to assess the consultant’s claim using the data?</em></p>
<p>No.&nbsp;The causal claim we can not analyze, the data is observational. Reasons can be outside of the numbers: For example, patients who can afford a medical consultant can afford better medical care, which could lead to a lower complication rate.</p>
<p><strong>Statistics Question:</strong> <em>Could the low complication rate of 4.8% be due to chance?</em></p>
</section>
<section id="parameter-vs.-statistic-hypotheses" class="slide level2 smaller">
<h2>Parameter vs.&nbsp;statistic, Hypotheses</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p><strong>Data</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a></a>organ_donor <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">outcome =</span> </span>
<span id="cb1-3"><a></a> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"complication"</span>, <span class="dv">3</span>), </span>
<span id="cb1-4"><a></a>   <span class="fu">rep</span>(<span class="st">"no complication"</span>, <span class="dv">59</span>)))</span>
<span id="cb1-5"><a></a>organ_donor</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 62 × 1
   outcome        
   &lt;chr&gt;          
 1 complication   
 2 complication   
 3 complication   
 4 no complication
 5 no complication
 6 no complication
 7 no complication
 8 no complication
 9 no complication
10 no complication
# ℹ 52 more rows</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a></a>organ_donor <span class="sc">|&gt;</span></span>
<span id="cb3-2"><a></a>  <span class="fu">count</span>(outcome)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  outcome             n
  &lt;chr&gt;           &lt;int&gt;
1 complication        3
2 no complication    59</code></pre>
</div>
</div>
</div><div class="column" style="width:60%;">
<p>In a test, a <strong>parameter</strong> is the “true” value of interest.<br>
We typically estimate the parameter using a <strong>sample statistic</strong> as a <strong>point estimate</strong>.</p>
<p><span class="math inline">\(p\)</span>: true rate of complication, here 10%</p>
<p><span class="math inline">\(\hat{p}\)</span>: rate of complication in the sample = <span class="math inline">\(\frac{3}{62}\)</span> = 0.048</p>
<p><strong>Two claims:</strong></p>
<p><span style="color:blue;"><strong>Null hypothesis <span class="math inline">\(H_0\)</span>:</strong></span> <em>There is nothing going on</em><br>
Complication rate for this consultant is no different than the US average of 10%</p>
<p><span style="color:blue;"><strong>Alternative hypothesis <span class="math inline">\(H_A\)</span>:</strong></span> <em>There is something going on</em><br>
Complication rate for this consultant is <strong>lower</strong> than the US average of 10%</p>
</div></div>
</section>
<section id="hypothesis-testing-as-a-court-trial" class="slide level2 smaller">
<h2>Hypothesis testing as a court trial</h2>
<ul>
<li><p><strong>Null hypothesis</strong>, <span class="math inline">\(H_0\)</span>: Defendant is innocent</p></li>
<li><p><strong>Alternative hypothesis</strong>, <span class="math inline">\(H_A\)</span>: Defendant is guilty</p></li>
<li><p><strong>Present the evidence:</strong> Collect data</p></li>
<li><p><strong>Judge the evidence:</strong> “Could these data plausibly have happened by chance if the null hypothesis were true?”</p>
<ul>
<li>Yes: Fail to reject <span class="math inline">\(H_0\)</span></li>
<li>No: Reject <span class="math inline">\(H_0\)</span></li>
</ul></li>
</ul>
</section>
<section id="hypothesis-testing-framework" class="slide level2 smaller">
<h2>Hypothesis testing framework</h2>
<ul>
<li><p>Start with a null hypothesis, <span class="math inline">\(H_0\)</span>, that represents the status quo</p></li>
<li><p>Set an alternative hypothesis, <span class="math inline">\(H_A\)</span>, that represents the research question, i.e.&nbsp;what we are testing for</p></li>
<li><p>Conduct a hypothesis test under the assumption that the null hypothesis is true and calculate a <strong>p-value</strong>.<br>
<strong>Definition:</strong> <em>Probability of the observed outcome or a more extreme one given that the null hypothesis is true.</em></p>
<ul>
<li>if the test results suggest that the data do not provide convincing evidence for the alternative hypothesis, stick with the null hypothesis</li>
<li>if they do, then reject the null hypothesis in favor of the alternative</li>
</ul></li>
</ul>
</section>
<section id="setting-the-hypotheses" class="slide level2 smaller">
<h2>Setting the hypotheses</h2>
<p><strong>In the following <span class="math inline">\(p\)</span> is the “true” rate of complication of the consultant.</strong></p>
<p><span class="math inline">\(H_0: p = 0.10\)</span> In the long run the consultant would also have a 10% complication rate.</p>
<p><span class="math inline">\(H_A: p &lt; 0.10\)</span> Also in the long run the consultant would have a complication rate less than 10%. (We would still not know if it is because of the consultant’s work or for something else!)</p>
</section>
<section id="simulating-the-null-distribution" class="slide level2 smaller">
<h2>Simulating the null distribution</h2>
<p>Since <span class="math inline">\(H_0: p = 0.10\)</span>, we need to simulate a null distribution where the probability of success (complication) for each trial (patient) is 0.10.</p>
<p><strong>How should we simulate the null distribution for this study using a bag of chips?</strong></p>
<ul>
<li>How many chips? <span class="fragment" style="color:red;">For example 10 which makes 10% choices possible</span></li>
<li>How many colors? <span class="fragment" style="color:red;">2</span></li>
<li>What should colors represent? <span class="fragment" style="color:red;">“complication”, “no complication”</span></li>
<li>How many draws? <span class="fragment" style="color:red;">62 as the data</span></li>
<li>With replacement or without replacement? <span class="fragment" style="color:red;">With replacement</span></li>
</ul>
<p>When sampling from the null distribution, what would be the expected proportion of “complications”? <span class="fragment" style="color:red;">0.1</span></p>
</section>
<section id="simulation" class="slide level2 smaller">
<h2>Simulation!</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb5-2"><a></a>outcomes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"complication"</span>, <span class="st">"no complication"</span>)</span>
<span id="cb5-3"><a></a>sim1 <span class="ot">&lt;-</span> <span class="fu">sample</span>(outcomes, <span class="at">size =</span> <span class="dv">62</span>, <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="fl">0.9</span>), <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-4"><a></a>sim1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "no complication" "no complication" "no complication" "no complication"
 [5] "no complication" "no complication" "no complication" "no complication"
 [9] "no complication" "no complication" "no complication" "no complication"
[13] "no complication" "complication"    "no complication" "no complication"
[17] "no complication" "no complication" "no complication" "no complication"
[21] "no complication" "no complication" "no complication" "no complication"
[25] "no complication" "no complication" "no complication" "complication"   
[29] "no complication" "no complication" "no complication" "no complication"
[33] "no complication" "no complication" "no complication" "no complication"
[37] "no complication" "no complication" "complication"    "no complication"
[41] "no complication" "no complication" "no complication" "no complication"
[45] "no complication" "no complication" "no complication" "no complication"
[49] "no complication" "no complication" "no complication" "no complication"
[53] "no complication" "no complication" "no complication" "no complication"
[57] "no complication" "no complication" "no complication" "no complication"
[61] "no complication" "no complication"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a></a><span class="fu">sum</span>(sim1 <span class="sc">==</span> <span class="st">"complication"</span>)<span class="sc">/</span><span class="dv">62</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.0483871</code></pre>
</div>
</div>
<p>Oh OK, this is the same as the consultant’s rate. But maybe it was a rare event?</p>
</section>
<section id="more-simulation" class="slide level2 smaller">
<h2>More simulation!</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a></a>one_sim <span class="ot">&lt;-</span> <span class="cf">function</span>() <span class="fu">sample</span>(outcomes, <span class="at">size =</span> <span class="dv">62</span>, <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="fl">0.9</span>), <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-2"><a></a></span>
<span id="cb9-3"><a></a><span class="fu">sum</span>(<span class="fu">one_sim</span>() <span class="sc">==</span> <span class="st">"complication"</span>)<span class="sc">/</span><span class="dv">62</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.1290323</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a></a><span class="fu">sum</span>(<span class="fu">one_sim</span>() <span class="sc">==</span> <span class="st">"complication"</span>)<span class="sc">/</span><span class="dv">62</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.1290323</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a></a><span class="fu">sum</span>(<span class="fu">one_sim</span>() <span class="sc">==</span> <span class="st">"complication"</span>)<span class="sc">/</span><span class="dv">62</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.09677419</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a></a><span class="fu">sum</span>(<span class="fu">one_sim</span>() <span class="sc">==</span> <span class="st">"complication"</span>)<span class="sc">/</span><span class="dv">62</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.09677419</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a></a><span class="fu">sum</span>(<span class="fu">one_sim</span>() <span class="sc">==</span> <span class="st">"complication"</span>)<span class="sc">/</span><span class="dv">62</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.1774194</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a></a><span class="fu">sum</span>(<span class="fu">one_sim</span>() <span class="sc">==</span> <span class="st">"complication"</span>)<span class="sc">/</span><span class="dv">62</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.1129032</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a></a><span class="fu">sum</span>(<span class="fu">one_sim</span>() <span class="sc">==</span> <span class="st">"complication"</span>)<span class="sc">/</span><span class="dv">62</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.1129032</code></pre>
</div>
</div>
<p>Oh OK, our fist simulation with 0.0483871 seems to be comparably low.</p>
</section>
<section id="automating-with-tidymodels" class="slide level2 smaller">
<h2>Automating with <code>tidymodels</code><sup>1</sup></h2>
<div class="columns">
<div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a></a>organ_donor</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 62 × 1
   outcome        
   &lt;chr&gt;          
 1 complication   
 2 complication   
 3 complication   
 4 no complication
 5 no complication
 6 no complication
 7 no complication
 8 no complication
 9 no complication
10 no complication
# ℹ 52 more rows</code></pre>
</div>
</div>
</div><div class="column" style="width:60%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a></a><span class="fu">library</span>(tidymodels)</span>
<span id="cb25-2"><a></a><span class="fu">set.seed</span>(<span class="dv">10</span>)</span>
<span id="cb25-3"><a></a>null_dist <span class="ot">&lt;-</span> organ_donor <span class="sc">|&gt;</span></span>
<span id="cb25-4"><a></a>  <span class="fu">specify</span>(<span class="at">response =</span> outcome, <span class="at">success =</span> <span class="st">"complication"</span>) <span class="sc">|&gt;</span></span>
<span id="cb25-5"><a></a>  <span class="fu">hypothesize</span>(<span class="at">null =</span> <span class="st">"point"</span>, </span>
<span id="cb25-6"><a></a>              <span class="at">p =</span> <span class="fu">c</span>(<span class="st">"complication"</span> <span class="ot">=</span> <span class="fl">0.10</span>, <span class="st">"no complication"</span> <span class="ot">=</span> <span class="fl">0.90</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb25-7"><a></a>  <span class="fu">generate</span>(<span class="at">reps =</span> <span class="dv">100</span>, <span class="at">type =</span> <span class="st">"draw"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb25-8"><a></a>  <span class="fu">calculate</span>(<span class="at">stat =</span> <span class="st">"prop"</span>)</span>
<span id="cb25-9"><a></a>null_dist</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Response: outcome (factor)
Null Hypothesis: point
# A tibble: 100 × 2
   replicate   stat
       &lt;int&gt;  &lt;dbl&gt;
 1         1 0.0323
 2         2 0.0645
 3         3 0.0968
 4         4 0.0161
 5         5 0.161 
 6         6 0.0968
 7         7 0.0645
 8         8 0.129 
 9         9 0.161 
10        10 0.0968
# ℹ 90 more rows</code></pre>
</div>
</div>
</div></div>
<aside><ol class="aside-footnotes"><li id="fn1"><p>Of course, you can also do it in your own way without packages.</p></li></ol></aside></section>
<section id="visualizing-the-null-distribution" class="slide level2 smaller">
<h2>Visualizing the null distribution</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a></a><span class="fu">ggplot</span>(<span class="at">data =</span> null_dist, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> stat)) <span class="sc">+</span></span>
<span id="cb27-2"><a></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="fl">0.005</span>) <span class="sc">+</span></span>
<span id="cb27-3"><a></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Null distribution"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="W10_files/figure-revealjs/unnamed-chunk-7-1.png" width="960" class="r-stretch"></section>
<section id="calculating-the-p-value-visually" class="slide level2 smaller">
<h2>Calculating the p-value, visually</h2>
<p><strong>What is the p-value:</strong><sup>1</sup> <em>How often was the simulated sample proportion at least as extreme as the observed sample proportion?</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a></a><span class="fu">ggplot</span>(<span class="at">data =</span> null_dist, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> stat)) <span class="sc">+</span></span>
<span id="cb28-2"><a></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="fl">0.005</span>) <span class="sc">+</span></span>
<span id="cb28-3"><a></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Null distribution"</span>)  <span class="sc">+</span></span>
<span id="cb28-4"><a></a> <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">3</span><span class="sc">/</span><span class="dv">62</span>, <span class="at">color =</span> <span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="W10_files/figure-revealjs/unnamed-chunk-8-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
<aside><ol class="aside-footnotes"><li id="fn2"><p><span style="color:red;">Warning:</span> The name p-value has nothing to do with the value <span class="math inline">\(p\)</span> we are currently trying to use as population parameter.</p></li></ol></aside></section>
<section id="calculating-the-p-value-directly" class="slide level2 smaller">
<h2>Calculating the p-value directly</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a></a>null_dist <span class="sc">|&gt;</span></span>
<span id="cb29-2"><a></a> <span class="fu">summarise</span>(<span class="at">p_value =</span> <span class="fu">sum</span>(stat <span class="sc">&lt;=</span> <span class="dv">3</span><span class="sc">/</span><span class="dv">62</span>)<span class="sc">/</span><span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  p_value
    &lt;dbl&gt;
1    0.13</code></pre>
</div>
</div>
<p>This is the fraction of simulations where the rate of complications was equal or below <span class="math inline">\(\frac{3}{62} =\)</span> 0.0483871.</p>
</section>
<section id="significance-level" class="slide level2 smaller">
<h2>Significance level</h2>
<ul>
<li><p>A <strong>significance level</strong> <span class="math inline">\(\alpha\)</span> is a threshold we make up to make our judgment about the plausibility of the null hypothesis being true given the observed data.</p></li>
<li><p>We often use <span class="math inline">\(\alpha = 0.05 = 5\%\)</span> as the cutoff for whether the p-value is low enough that the data are unlikely to have come from the null model.</p></li>
<li><p>If p-value &lt; <span class="math inline">\(\alpha\)</span>, reject <span class="math inline">\(H_0\)</span> in favor of <span class="math inline">\(H_A\)</span>: The data provide convincing evidence for the alternative hypothesis.</p></li>
<li><p>If p-value &gt; <span class="math inline">\(\alpha\)</span>, fail to reject <span class="math inline">\(H_0\)</span> in favor of <span class="math inline">\(H_A\)</span>: The data do not provide convincing evidence for the alternative hypothesis.</p></li>
</ul>
<p><strong>What is the conclusion of the hypothesis test?</strong></p>
<p>Since the p-value is greater than the significance level, we fail to reject the null hypothesis. These data do not provide convincing evidence that this consultant incurs a lower complication rate than the 10% overall US complication rate.</p>
</section>
<section id="simulations-is-not-sufficient" class="slide level2 smaller">
<h2>100 simulations is not sufficient</h2>
<ul>
<li>We simulate 15,000 times to get an accurate distribution.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a></a>null_dist <span class="ot">&lt;-</span> organ_donor <span class="sc">|&gt;</span></span>
<span id="cb31-2"><a></a>  <span class="fu">specify</span>(<span class="at">response =</span> outcome, <span class="at">success =</span> <span class="st">"complication"</span>) <span class="sc">|&gt;</span></span>
<span id="cb31-3"><a></a>  <span class="fu">hypothesize</span>(<span class="at">null =</span> <span class="st">"point"</span>, </span>
<span id="cb31-4"><a></a>              <span class="at">p =</span> <span class="fu">c</span>(<span class="st">"complication"</span> <span class="ot">=</span> <span class="fl">0.10</span>, <span class="st">"no complication"</span> <span class="ot">=</span> <span class="fl">0.90</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb31-5"><a></a>  <span class="fu">generate</span>(<span class="at">reps =</span> <span class="dv">15000</span>, <span class="at">type =</span> <span class="st">"simulate"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb31-6"><a></a>  <span class="fu">calculate</span>(<span class="at">stat =</span> <span class="st">"prop"</span>)</span>
<span id="cb31-7"><a></a><span class="fu">ggplot</span>(<span class="at">data =</span> null_dist, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> stat)) <span class="sc">+</span></span>
<span id="cb31-8"><a></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="fl">0.005</span>) <span class="sc">+</span></span>
<span id="cb31-9"><a></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">3</span><span class="sc">/</span><span class="dv">62</span>, <span class="at">color =</span> <span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="W10_files/figure-revealjs/unnamed-chunk-10-1.png" width="960" class="r-stretch"></section>
<section id="our-more-robust-p-value" class="slide level2 smaller">
<h2>Our more robust p-value</h2>
<p>For the null distribution with 15,000 simulations</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a></a>null_dist <span class="sc">|&gt;</span></span>
<span id="cb32-2"><a></a>  <span class="fu">filter</span>(stat <span class="sc">&lt;=</span> <span class="dv">3</span><span class="sc">/</span><span class="dv">62</span>) <span class="sc">|&gt;</span></span>
<span id="cb32-3"><a></a>  <span class="fu">summarise</span>(<span class="at">p_value =</span> <span class="fu">n</span>()<span class="sc">/</span><span class="fu">nrow</span>(null_dist))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  p_value
    &lt;dbl&gt;
1   0.125</code></pre>
</div>
</div>
</section>
<section id="p-value-in-model-outputs" class="slide level2 smaller">
<h2>p-value in model outputs</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>Model output for a linear model with palmer penguins.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a></a><span class="fu">linear_reg</span>() <span class="sc">|&gt;</span> <span class="fu">set_engine</span>(<span class="st">"lm"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb34-2"><a></a>    <span class="fu">fit</span>(bill_length_mm <span class="sc">~</span> bill_depth_mm, <span class="at">data =</span> penguins) <span class="sc">|&gt;</span> <span class="fu">tidy</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 5
  term          estimate std.error statistic  p.value
  &lt;chr&gt;            &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)     55.1       2.52      21.9  6.91e-67
2 bill_depth_mm   -0.650     0.146     -4.46 1.12e- 5</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p>Model output for a logistic regression model with email from <a href="https://www.openintro.org/data/index.php?data=email">openintro</a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a></a><span class="fu">library</span>(openintro)</span>
<span id="cb36-2"><a></a><span class="fu">logistic_reg</span>() <span class="sc">|&gt;</span>  <span class="fu">set_engine</span>(<span class="st">"glm"</span>) <span class="sc">|&gt;</span></span>
<span id="cb36-3"><a></a>  <span class="fu">fit</span>(spam <span class="sc">~</span> from <span class="sc">+</span> cc, <span class="at">data =</span> email, <span class="at">family =</span> <span class="st">"binomial"</span>) <span class="sc">|&gt;</span> <span class="fu">tidy</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 5
  term         estimate std.error statistic p.value
  &lt;chr&gt;           &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
1 (Intercept)  13.6      309.        0.0439   0.965
2 from1       -15.8      309.       -0.0513   0.959
3 cc            0.00423    0.0193    0.220    0.826</code></pre>
</div>
</div>
</div></div>
<p><em>What do the p-values for coefficients mean? What is the null hypothesis?</em></p>
<ul>
<li>Null-Hypothesis: No relationship predictor and response. Coefficient could be zero.</li>
<li>Alternative Hypothesis: The coefficient is away from zero.</li>
<li>Small p-value: evidence for rejecting the hypothesis that there is no effect.</li>
<li>Technically: The statistic (which we do not treat now) is sufficiently away from zero.</li>
</ul>
</section>
<section id="xkcd-on-p-values" class="slide level2 smaller">
<h2>xkcd on p-values</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p><a href="https://xkcd.com/1478/"><img data-src="https://imgs.xkcd.com/comics/p_values_2x.png" height="500"></a> <a href="https://xkcd.com/882/"><img data-src="https://imgs.xkcd.com/comics/significant.png" height="500"></a></p>
</div><div class="column" style="width:40%;">
<div class="fragment">
<ul>
<li>Significance levels are fairly arbitrary. Sometimes they are used (wrongly) as definitive judgments</li>
<li>They can even be used to do <em>p-hacking</em>: Searching for “significant” effects in observational data</li>
<li>In parts of science it has become a “gamed” performance metric.</li>
<li>The p-value says nothing about effect size!</li>
</ul>
</div>
</div></div>
</section>
<section id="p-value-misinterpretation" class="slide level2 smaller">
<h2>p-value misinterpretation</h2>
<p>p-values do not measure<sup>1</sup></p>
<ul>
<li>the probability that the studied hypothesis is true</li>
<li>the probability that the data were produced by random chance alone</li>
<li>the size of an effect</li>
<li>the importance of a result” or “evidence regarding a model or hypothesis” (it is only against the null hypothesis).</li>
</ul>
<div class="fragment">
<p><strong>Correct explanation:</strong><br>
The p-value is the probability of obtaining test results at least as extreme as the result actually observed, under the assumption that the null hypothesis is correct.</p>
<p>p-values and significance tests, when properly applied and interpreted, increase the rigor of the conclusions drawn from data.<sup>2</sup></p>
</div>
<aside><ol class="aside-footnotes"><li id="fn3"><p>From the American Statistical Association (ASA) 2016</p></li><li id="fn4"><p>From the American Statistical Association (ASA) 2019</p></li></ol></aside></section></section>
<section>
<section id="classification-compare-logistic-regression-and-decision-tree" class="title-slide slide level1 center">
<h1>Classification: Compare logistic regression and decision tree</h1>

</section>
<section id="purpose-of-the-section" class="slide level2 smaller">
<h2>Purpose of the section</h2>
<ul>
<li>Go again through the modeling workflow (with <code>tidymodels</code>) and see that large parts are identical</li>
<li>Look again at the coefficients of a logistic regression model</li>
<li>Learn the basic idea of a decision tree (you will not learn the details here)</li>
<li>Do the classification with both models and compare the confusion matrices</li>
</ul>
</section>
<section id="specify-recipe-and-models" class="slide level2 smaller">
<h2>Specify recipe and models</h2>
<p>For both logistic regression and decision tree:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a></a><span class="fu">library</span>(tidymodels)</span>
<span id="cb38-2"><a></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="cb38-3"><a></a>peng_recipe <span class="ot">&lt;-</span> <span class="fu">recipe</span>(sex <span class="sc">~</span> ., <span class="at">data =</span> penguins) <span class="sc">|&gt;</span> </span>
<span id="cb38-4"><a></a> <span class="fu">step_rm</span>(year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<ul>
<li>We specify a recipe to predict <code>sex</code> with all available variables in <code>penguins</code>
<ul>
<li>Typically, more pre-processing steps are specified here, but we are mostly fine</li>
</ul></li>
</ul>
</div>
<div class="fragment">
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Logistic Regression</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a></a>peng_logreg <span class="ot">&lt;-</span> <span class="fu">logistic_reg</span>() <span class="sc">|&gt;</span></span>
<span id="cb39-2"><a></a> <span class="fu">set_engine</span>(<span class="st">"glm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>peng_logreg</code> specifies to fit with <code>glm</code> (generalized linear model from <code>base</code> R)</p>
</div><div class="column" style="width:50%;">
<p><strong>Decision Tree</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a></a>peng_tree <span class="ot">&lt;-</span> <span class="fu">decision_tree</span>() <span class="sc">|&gt;</span></span>
<span id="cb40-2"><a></a> <span class="fu">set_engine</span>(<span class="st">"rpart"</span>) <span class="sc">|&gt;</span></span>
<span id="cb40-3"><a></a> <span class="fu">set_mode</span>(<span class="st">"classification"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>peng_tree</code> specifies to fit for <code>classification</code> with the <code>rpart</code><sup>1</sup> as engine.</p>
</div></div>
</div>
<aside><ol class="aside-footnotes"><li id="fn5"><p><code>rpart</code> is a package for <em>recursive partitioning and regression trees</em>. Different decision tree procedures are subsumed as <strong>classification and regression trees (CART)</strong></p></li></ol></aside></section>
<section id="split-and-fit" class="slide level2 smaller">
<h2>Split and fit</h2>
<p>For logistic regression and decision tree:</p>
<p>Split into test and training data</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb41-2"><a></a>penguins_split <span class="ot">&lt;-</span> <span class="fu">initial_split</span>(penguins, <span class="at">prop =</span> <span class="fl">0.7</span>, <span class="at">strata =</span> sex)</span>
<span id="cb41-3"><a></a>peng_train <span class="ot">&lt;-</span> <span class="fu">training</span>(penguins_split)</span>
<span id="cb41-4"><a></a>peng_test <span class="ot">&lt;-</span> <span class="fu">testing</span>(penguins_split)</span>
<span id="cb41-5"><a></a>peng_workflow <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">|&gt;</span> <span class="fu">add_recipe</span>(peng_recipe)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Logistic Regression</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a></a>peng_logreg_fit <span class="ot">&lt;-</span> peng_workflow <span class="sc">|&gt;</span> </span>
<span id="cb42-2"><a></a> <span class="fu">add_model</span>(peng_logreg) <span class="sc">|&gt;</span> </span>
<span id="cb42-3"><a></a> <span class="fu">fit</span>(<span class="at">data =</span> peng_train)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<p><strong>Decision Tree</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a></a>peng_tree_fit <span class="ot">&lt;-</span> peng_workflow <span class="sc">|&gt;</span> </span>
<span id="cb43-2"><a></a> <span class="fu">add_model</span>(peng_tree) <span class="sc">|&gt;</span> </span>
<span id="cb43-3"><a></a> <span class="fu">fit</span>(<span class="at">data =</span> peng_train)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div></div>
</div>
</section>
<section id="look-at-fitted-logistic-regression" class="slide level2 smaller">
<h2>Look at fitted logistic regression</h2>
<div class="columns">
<div class="column" style="width:60%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a></a>peng_logreg_fit <span class="sc">|&gt;</span> <span class="fu">tidy</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 5
  term               estimate std.error statistic      p.value
  &lt;chr&gt;                 &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;        &lt;dbl&gt;
1 (Intercept)       -90.4      16.7        -5.41  0.0000000632
2 speciesChinstrap   -6.06      1.90       -3.19  0.00142     
3 speciesGentoo      -8.65      3.49       -2.48  0.0132      
4 islandDream         0.752     1.15        0.656 0.512       
5 islandTorgersen     0.380     1.13        0.335 0.737       
6 bill_length_mm      0.532     0.150       3.56  0.000378    
7 bill_depth_mm       1.79      0.456       3.93  0.0000866   
8 flipper_length_mm   0.0552    0.0620      0.891 0.373       
9 body_mass_g         0.00693   0.00162     4.27  0.0000193   </code></pre>
</div>
</div>
</div><div class="column" style="width:40%;">
<ul>
<li>What do the categorical predictors tell us? Which are signigficant?</li>
<li>What do the numerical predictors tell us? Which are signigficant?</li>
<li>Why is the coefficient for <code>body_mass_g</code> so small, but highly significant?</li>
</ul>
</div></div>
<div class="fragment">
<p><strong>Categorical predictors:</strong> We have 3 <code>species</code>, 3 <code>island</code>. So, we see 4 new variables, 2 for <code>species</code> and 2 for <code>island</code> (the third is the reference category). Species are significant (p &lt; 0.05), but islands not.</p>
<p><strong>Numerical predictors:</strong> <code>flipper_length_mm</code> is insignificant, though its coefficient is larger than for <code>body_mass_g</code>. Reason: values of <code>body_mass_g</code> are larger than those of <code>flipper_length_mm</code>. Body mass differs by much more grams than flipper length differs by millimeters.</p>
</div>
</section>
<section id="what-is-a-decision-tree" class="slide level2 smaller">
<h2>What is a decision tree?</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a></a>peng_tree_fit</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>══ Workflow [trained] ══════════════════════════════════════════════════════════
Preprocessor: Recipe
Model: decision_tree()

── Preprocessor ────────────────────────────────────────────────────────────────
1 Recipe Step

• step_rm()

── Model ───────────────────────────────────────────────────────────────────────
n=234 (6 observations deleted due to missingness)

node), split, n, loss, yval, (yprob)
      * denotes terminal node

 1) root 234 117 female (0.50000000 0.50000000)  
   2) bill_length_mm&lt; 48.15 166  57 female (0.65662651 0.34337349)  
     4) bill_depth_mm&lt; 18.05 103  14 female (0.86407767 0.13592233)  
       8) body_mass_g&lt; 4987.5 88   4 female (0.95454545 0.04545455) *
       9) body_mass_g&gt;=4987.5 15   5 male (0.33333333 0.66666667) *
     5) bill_depth_mm&gt;=18.05 63  20 male (0.31746032 0.68253968)  
      10) body_mass_g&lt; 3875 29  10 female (0.65517241 0.34482759)  
        20) flipper_length_mm&lt; 190.5 18   3 female (0.83333333 0.16666667) *
        21) flipper_length_mm&gt;=190.5 11   4 male (0.36363636 0.63636364) *
      11) body_mass_g&gt;=3875 34   1 male (0.02941176 0.97058824) *
   3) bill_length_mm&gt;=48.15 68   8 male (0.11764706 0.88235294)  
     6) body_mass_g&lt; 5175 35   8 male (0.22857143 0.77142857)  
      12) bill_depth_mm&lt; 18 9   3 female (0.66666667 0.33333333) *
      13) bill_depth_mm&gt;=18 26   2 male (0.07692308 0.92307692) *
     7) body_mass_g&gt;=5175 33   0 male (0.00000000 1.00000000) *</code></pre>
</div>
</div>
<ul>
<li>A sequence of rules for yes/no decisions</li>
<li>Selects variables and thresholds which separate the data to predict (here <code>sex</code>) best</li>
<li>Further details are not the scope of this course</li>
</ul>
</section>
<section id="show-rules" class="slide level2 smaller">
<h2>Show rules</h2>
<p>We “dig out” the original fitted <code>rpart</code>-object from the <code>workflow</code>-object with <code>peng_tree_fit$fit$fit$fit</code> and plot it:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a></a><span class="fu">library</span>(rpart.plot)</span>
<span id="cb48-2"><a></a><span class="fu">rpart.rules</span>(peng_tree_fit<span class="sc">$</span>fit<span class="sc">$</span>fit<span class="sc">$</span>fit, <span class="at">roundint=</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  ..y                                                                                                 
 0.05 when bill_length_mm &lt;  48 &amp; body_mass_g &lt;  4988 &amp; bill_depth_mm &lt;  18                           
 0.17 when bill_length_mm &lt;  48 &amp; body_mass_g &lt;  3875 &amp; bill_depth_mm &gt;= 18 &amp; flipper_length_mm &lt;  191
 0.33 when bill_length_mm &gt;= 48 &amp; body_mass_g &lt;  5175 &amp; bill_depth_mm &lt;  18                           
 0.64 when bill_length_mm &lt;  48 &amp; body_mass_g &lt;  3875 &amp; bill_depth_mm &gt;= 18 &amp; flipper_length_mm &gt;= 191
 0.67 when bill_length_mm &lt;  48 &amp; body_mass_g &gt;= 4988 &amp; bill_depth_mm &lt;  18                           
 0.92 when bill_length_mm &gt;= 48 &amp; body_mass_g &lt;  5175 &amp; bill_depth_mm &gt;= 18                           
 0.97 when bill_length_mm &lt;  48 &amp; body_mass_g &gt;= 3875 &amp; bill_depth_mm &gt;= 18                           
 1.00 when bill_length_mm &gt;= 48 &amp; body_mass_g &gt;= 5175                                                 </code></pre>
</div>
</div>
<ul>
<li>The first three rules would predict <code>female</code> for all observations</li>
<li>The last five rules would predict <code>male</code> for all observations</li>
</ul>
<p>The order of <code>male</code> and <code>female</code> is because <code>sex</code> is a factor with the first level <code>female</code> and the second level <code>male</code>. The probabilities in front of the rule-text are for the second level: <code>male</code>.</p>
</section>
<section id="visualize-tree" class="slide level2 smaller">
<h2>Visualize tree</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a></a><span class="fu">library</span>(rpart.plot)</span>
<span id="cb50-2"><a></a><span class="fu">rpart.plot</span>(peng_tree_fit<span class="sc">$</span>fit<span class="sc">$</span>fit<span class="sc">$</span>fit, </span>
<span id="cb50-3"><a></a>           <span class="at">roundint=</span><span class="cn">FALSE</span>, <span class="at">tweak=</span><span class="fl">1.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="W10_files/figure-revealjs/unnamed-chunk-23-1.png" width="960" class="r-stretch"><p>How to read?</p>
<ul>
<li>The percentage is the fraction of the total cases in this group</li>
<li>The probability-number is the fraction of observations which are male in the group</li>
<li><code>male</code> of <code>female</code> and color would match the predicted outcome at this decision node</li>
</ul>
</section>
<section id="make-predictions-for-test-data" class="slide level2 smaller">
<h2>Make predictions for test data</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a></a>peng_logreg_pred <span class="ot">&lt;-</span> </span>
<span id="cb51-2"><a></a> <span class="fu">predict</span>(peng_logreg_fit, peng_test) <span class="sc">|&gt;</span> </span>
<span id="cb51-3"><a></a> <span class="fu">bind_cols</span>(peng_test) </span>
<span id="cb51-4"><a></a>peng_logreg_pred <span class="sc">|&gt;</span> </span>
<span id="cb51-5"><a></a> <span class="fu">conf_mat</span>(<span class="at">truth =</span> sex, <span class="at">estimate =</span> .pred_class)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          Truth
Prediction female male
    female     46   10
    male        2   41</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a></a>peng_tree_pred <span class="ot">&lt;-</span> </span>
<span id="cb53-2"><a></a> <span class="fu">predict</span>(peng_tree_fit, peng_test) <span class="sc">|&gt;</span> </span>
<span id="cb53-3"><a></a> <span class="fu">bind_cols</span>(peng_test)</span>
<span id="cb53-4"><a></a>peng_tree_pred <span class="sc">|&gt;</span> </span>
<span id="cb53-5"><a></a> <span class="fu">conf_mat</span>(<span class="at">truth =</span> sex, <span class="at">estimate =</span> .pred_class)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          Truth
Prediction female male
    female     43   12
    male        5   39</code></pre>
</div>
</div>
</div></div>
<ul>
<li>The logistic regression has more correct predictions.</li>
<li><span style="color:red;">Warning:</span> The function <code>conf_mat</code> (from <code>yardstick</code> of <code>tidymodels</code>) shows the transposed confusion matrix compared with <a href="https://en.wikipedia.org/wiki/Confusion_matrix">Wikipedia:Confusion Matrix</a>. In <code>conf_mat</code>, the <em>true conditions</em> are in columns. The wikipedia convention is that columns are the <em>predicted conditions</em>.</li>
</ul>
</section></section>
<section>
<section id="what-is-a-model-terminological-confusion" class="title-slide slide level1 center">
<h1>What is a model? Terminological confusion…</h1>

</section>
<section id="model-in-statistical-learning" class="slide level2 smaller">
<h2>“Model” in Statistical Learning</h2>
<p>We already had the difference between <em>variable-based</em> and <em>agent-based</em> models in earlier lectures.</p>
<p>But even in the variable-based model setting of <strong>statistical learning</strong>, the term <em>model</em> can be more or less abstract:</p>
<ol type="1">
<li>Very general: <span class="math inline">\(Y = f(X_1, \dots, X_m) + \varepsilon\)</span> where <span class="math inline">\(Y\)</span> is the response variable and <span class="math inline">\(X_i\)</span> are features which we put in our <strong>model</strong>: the abstract and unknown function <span class="math inline">\(f\)</span>. <span class="math inline">\(\varepsilon\)</span> is the error which can never explain and which we also usually do not know.</li>
<li>More specific: The <strong>model</strong> <span class="math inline">\(f\)</span> could already be of a specific type, like <em>linear regression</em>, <em>logistic regression</em>, or a <em>decision tree</em> or other functional forms. As this need not be the <em>real</em> function we may call it <em>assumed model</em> <span class="math inline">\(\hat f\)</span> For example a linear model <span class="math inline">\(\hat f(X_1, \dots, X_m) = \beta_0 + \beta_1 X_1 + \dots + \beta_m X_m + \varepsilon\)</span>. Now, the model has specified parameters which values are unknown.</li>
</ol>
</section>
<section id="more-specific-fitted-model" class="slide level2 smaller">
<h2>More specific: Fitted model</h2>
<ol start="3" type="1">
<li>Fitted model: When we have a data set with values for <span class="math inline">\(Y, X_1, \dots, X_m\)</span> we can fit values for the parameters <span class="math inline">\(\hat\beta_0, \dots, \hat\beta_m\)</span> to the data. This is the <em>fitted model</em> <span class="math inline">\(\hat f\)</span>. This is called parameter estimation: We estimate <span class="math inline">\(\hat\beta_0, \dots, \hat\beta_m\)</span> with the hope that they match the <em>real</em> values <span class="math inline">\(\beta_0, \dots, \beta_m\)</span> and that the linear model <span class="math inline">\(\hat f\)</span> matches the <em>real</em> function <span class="math inline">\(f\)</span>.</li>
<li>Now we could specify further to fit a specific parameterized model with a specific algorithm, and a specific set of hyperparameters, and maybe more …</li>
</ol>
<p>Sometimes model means only a certain aspect of all these, for example the <em>formula</em> like <code>sex ~ bill_length_mm + bill_depth_mm + flipper_length_mm + body_mass_g + species + island</code></p>
<div class="fragment">
<p><span style="color:blue;">Take away:</span> “Model” can mean things with very different granularity. That is OK because they are all related and all fit the definition of being a <strong>simplified representation of reality</strong>.</p>
<p><span style="color:blue;"><strong>Be prepared to specify what you mean when you are talking about a model.</strong></span></p>
</div>
</section></section>
<section>
<section id="regression-compare-linear-regression-and-decision-tree" class="title-slide slide level1 center">
<h1>Regression: Compare linear regression and decision tree</h1>

</section>
<section id="purpose-of-the-section-1" class="slide level2 smaller">
<h2>Purpose of the section</h2>
<ul>
<li>Go again through the modeling workflow (with <code>tidymodels</code>) and see that large parts are identical</li>
<li>Look again at the coefficients of a linear model</li>
<li>See how the decision tree looks like for a regression problem</li>
<li>Compare the two most common performance measures for regression models: Root Mean Squared Error (RMSE) and R-squared</li>
</ul>
</section>
<section id="specify-recipe-and-models-1" class="slide level2 smaller">
<h2>Specify recipe and models</h2>
<ul>
<li>We specify a recipe to predict <code>body_mass_g</code> with all available variables in <code>penguins</code> and put it in a workflow
<ul>
<li>Typically, more pre-processing steps are specified here, but we are mostly fine</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a></a>peng_recipe2 <span class="ot">&lt;-</span> <span class="fu">recipe</span>(body_mass_g <span class="sc">~</span> ., <span class="at">data =</span> penguins) <span class="sc">|&gt;</span> </span>
<span id="cb55-2"><a></a> <span class="fu">step_rm</span>(year)</span>
<span id="cb55-3"><a></a>peng_workflow2 <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">|&gt;</span> </span>
<span id="cb55-4"><a></a> <span class="fu">add_recipe</span>(peng_recipe2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can re-use the split and the training and test set.</p>
<div class="fragment">
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Linear Regression</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a></a>peng_linreg <span class="ot">&lt;-</span> <span class="fu">linear_reg</span>() <span class="sc">|&gt;</span></span>
<span id="cb56-2"><a></a> <span class="fu">set_engine</span>(<span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<p><strong>Decision Tree</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a></a>peng_regtree <span class="ot">&lt;-</span> <span class="fu">decision_tree</span>() <span class="sc">|&gt;</span></span>
<span id="cb57-2"><a></a> <span class="fu">set_engine</span>(<span class="st">"rpart"</span>) <span class="sc">|&gt;</span></span>
<span id="cb57-3"><a></a> <span class="fu">set_mode</span>(<span class="st">"regression"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div></div>
</div>
</section>
<section id="fit-regression-models" class="slide level2 smaller">
<h2>Fit Regression Models</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Linear Regression</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a></a>peng_linreg_fit <span class="ot">&lt;-</span> peng_workflow2 <span class="sc">|&gt;</span> </span>
<span id="cb58-2"><a></a> <span class="fu">add_model</span>(peng_linreg) <span class="sc">|&gt;</span> </span>
<span id="cb58-3"><a></a> <span class="fu">fit</span>(<span class="at">data =</span> peng_train)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<p><strong>Decision Tree</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a></a>peng_regtree_fit <span class="ot">&lt;-</span> peng_workflow2 <span class="sc">|&gt;</span> </span>
<span id="cb59-2"><a></a> <span class="fu">add_model</span>(peng_regtree) <span class="sc">|&gt;</span> </span>
<span id="cb59-3"><a></a> <span class="fu">fit</span>(<span class="at">data =</span> peng_train)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div></div>
</section>
<section id="look-at-fitted-linear-regression" class="slide level2 smaller">
<h2>Look at fitted linear regression</h2>
<div class="columns">
<div class="column" style="width:60%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a></a>peng_linreg_fit <span class="sc">|&gt;</span> <span class="fu">tidy</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 5
  term              estimate std.error statistic  p.value
  &lt;chr&gt;                &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)         -829.     701.      -1.18  2.38e- 1
2 speciesChinstrap    -268.     109.      -2.47  1.44e- 2
3 speciesGentoo       1010.     164.       6.15  3.52e- 9
4 islandDream          -14.5     70.0     -0.208 8.36e- 1
5 islandTorgersen      -21.4     75.7     -0.283 7.77e- 1
6 bill_length_mm        19.8      8.55     2.32  2.13e- 2
7 bill_depth_mm         53.7     23.9      2.25  2.56e- 2
8 flipper_length_mm     13.6      3.54     3.84  1.58e- 4
9 sexmale              393.      58.5      6.71  1.57e-10</code></pre>
</div>
</div>
</div><div class="column" style="width:40%;">
<ul>
<li>What do the categorical predictors tell us? Which are signigficant?</li>
<li>What do the numerical predictors tell us? Which are signigficant?</li>
</ul>
</div></div>
<div class="fragment">
<p><strong>Categorical predictors:</strong> We 3 <code>species</code>, 3 <code>island</code> and 2 <code>sex</code>. So, we see 5 new variables. Species and sex are significant, but islands not.</p>
<p><strong>Numerical predictors:</strong> All 3 are significant.</p>
</div>
</section>
<section id="show-rules-1" class="slide level2 smaller">
<h2>Show rules</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a></a><span class="fu">library</span>(rpart.plot)</span>
<span id="cb62-2"><a></a><span class="fu">rpart.rules</span>(peng_regtree_fit<span class="sc">$</span>fit<span class="sc">$</span>fit<span class="sc">$</span>fit, <span class="at">roundint=</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  ..y                                                    
 3418 when species is Adelie or Chinstrap &amp; sex is female
 3961 when species is Adelie or Chinstrap &amp; sex is   male
 4693 when species is              Gentoo &amp; sex is female
 5474 when species is              Gentoo &amp; sex is   male</code></pre>
</div>
</div>
<ul>
<li>For each terminal node a certain value is predicted (the mean of the remaining penguins)</li>
</ul>
</section>
<section id="visualize-tree-1" class="slide level2 smaller">
<h2>Visualize tree</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a></a><span class="fu">library</span>(rpart.plot)</span>
<span id="cb64-2"><a></a><span class="fu">rpart.plot</span>(peng_regtree_fit<span class="sc">$</span>fit<span class="sc">$</span>fit<span class="sc">$</span>fit, </span>
<span id="cb64-3"><a></a>           <span class="at">roundint=</span><span class="cn">FALSE</span>, <span class="at">tweak=</span><span class="fl">1.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="W10_files/figure-revealjs/unnamed-chunk-33-1.png" width="960" class="r-stretch"><p>How to read?</p>
<ul>
<li>The percentage is the fraction of the total cases in this group</li>
<li>The number is the predicted outcome (mean body mass) at this decision node</li>
</ul>
</section>
<section id="make-predictions-for-test-data-1" class="slide level2 smaller">
<h2>Make predictions for test data</h2>
<div class="columns">
<div class="column" style="width:65%;">
<p><strong>Linear Regression</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a></a>peng_linreg_pred <span class="ot">&lt;-</span> </span>
<span id="cb65-2"><a></a> <span class="fu">predict</span>(peng_linreg_fit, peng_test) <span class="sc">|&gt;</span> </span>
<span id="cb65-3"><a></a> <span class="fu">bind_cols</span>(peng_test) </span>
<span id="cb65-4"><a></a>peng_linreg_pred <span class="sc">|&gt;</span> </span>
<span id="cb65-5"><a></a> <span class="fu">select</span>(.pred, body_mass_g, <span class="fu">everything</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb65-6"><a></a> <span class="fu">slice</span>(<span class="dv">10</span><span class="sc">*</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)) <span class="co"># show selected rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 9
   .pred body_mass_g species   island    bill_length_mm bill_depth_mm
   &lt;dbl&gt;       &lt;int&gt; &lt;fct&gt;     &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;
 1 3349.        3700 Adelie    Torgersen           36.6          17.8
 2 3979.        3950 Adelie    Dream               38.8          20  
 3 3902.        3800 Adelie    Dream               36.3          19.5
 4 4106.        3875 Adelie    Torgersen           41.4          18.5
 5 3499.        3400 Adelie    Dream               40.2          17.1
 6 4597.        4150 Gentoo    Biscoe              42            13.5
 7 4688.        4200 Gentoo    Biscoe              45.5          13.9
 8 4929.        4850 Gentoo    Biscoe              48.5          15  
 9 4014.        4150 Chinstrap Dream               52            19  
10 4108.        4050 Chinstrap Dream               50.7          19.7
# ℹ 3 more variables: flipper_length_mm &lt;int&gt;, sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
</div><div class="column" style="width:35%;">
<p><strong>Decision Tree</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a></a>peng_regtree_pred <span class="ot">&lt;-</span> </span>
<span id="cb67-2"><a></a> <span class="fu">predict</span>(peng_regtree_fit, peng_test) <span class="sc">|&gt;</span> </span>
<span id="cb67-3"><a></a> <span class="fu">bind_cols</span>(peng_test)</span>
<span id="cb67-4"><a></a>peng_regtree_pred <span class="sc">|&gt;</span> </span>
<span id="cb67-5"><a></a> <span class="fu">select</span>(.pred, body_mass_g, species, sex) <span class="sc">|&gt;</span> </span>
<span id="cb67-6"><a></a> <span class="fu">slice</span>(<span class="dv">10</span><span class="sc">*</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)) <span class="co"># show same selected rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 4
   .pred body_mass_g species   sex   
   &lt;dbl&gt;       &lt;int&gt; &lt;fct&gt;     &lt;fct&gt; 
 1 3418         3700 Adelie    female
 2 3961.        3950 Adelie    male  
 3 3961.        3800 Adelie    male  
 4 3961.        3875 Adelie    male  
 5 3418         3400 Adelie    female
 6 4693.        4150 Gentoo    female
 7 4693.        4200 Gentoo    female
 8 4693.        4850 Gentoo    female
 9 3961.        4150 Chinstrap male  
10 3961.        4050 Chinstrap male  </code></pre>
</div>
</div>
</div></div>
</section>
<section id="regression-performance-evaluation" class="slide level2 smaller">
<h2>Regression Performance Evaluation</h2>
<p><span style="color:blue;"><strong>R-squared</strong></span>: Percentage of variability in <code>body_mass_g</code> explained by the model</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Linear Regression</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a></a><span class="fu">rsq</span>(peng_linreg_pred, </span>
<span id="cb69-2"><a></a>    <span class="at">truth =</span> body_mass_g, <span class="at">estimate =</span> .pred)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  .metric .estimator .estimate
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
1 rsq     standard       0.861</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><strong>Decision Tree</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a></a><span class="fu">rsq</span>(peng_regtree_pred, </span>
<span id="cb71-2"><a></a>    <span class="at">truth =</span> body_mass_g, <span class="at">estimate =</span> .pred)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  .metric .estimator .estimate
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
1 rsq     standard       0.806</code></pre>
</div>
</div>
</div></div>
<p><span style="color:blue;"><strong>Root Mean Squared Error (RMSE)</strong>:</span> <span class="math inline">\(\text{RMSE} = \sqrt{\frac{1}{n}\sum_{i = 1}^n (y_i - \hat{y}_i)^2}\)</span><br>
where <span class="math inline">\(\hat{y}_i\)</span> is the predicted value and <span class="math inline">\(y_i\)</span> the true value. (The name RMSE is descriptive.)</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a></a><span class="fu">rmse</span>(peng_linreg_pred, </span>
<span id="cb73-2"><a></a>     <span class="at">truth =</span> body_mass_g, </span>
<span id="cb73-3"><a></a>     <span class="at">estimate =</span> .pred)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  .metric .estimator .estimate
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
1 rmse    standard        290.</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a></a><span class="fu">rmse</span>(peng_regtree_pred, </span>
<span id="cb75-2"><a></a>     <span class="at">truth =</span> body_mass_g, </span>
<span id="cb75-3"><a></a>     <span class="at">estimate =</span> .pred)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  .metric .estimator .estimate
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
1 rmse    standard        337.</code></pre>
</div>
</div>
</div></div>
<p>Which model is better in prediction? <span class="fragment"><strong>Linear regression.</strong> The R-squared is higher.</span></p>
</section>
<section id="what-rmse-is-better" class="slide level2 smaller">
<h2>What RMSE is better?</h2>
<div class="fragment">
<p><strong>Lower. The lower the error, the better the model’s prediction.</strong></p>
<p>It is the other way round than R-squared! Do not confuse them.</p>
</div>
<div class="fragment">
<p>Notes:</p>
<ul>
<li>The common method to fit a linear model is the <em>ordinary least squares</em> (OLS) method</li>
<li>That means the fitted parameters should deliver the lowest possible sum of squared errors (SSE) between predicted and observed values.</li>
<li>Minimizing the sum of squared errors (SSE) is identical to minimizing the mean of squared errors (MSE) because it only adds the factor <span class="math inline">\(1/n\)</span>.</li>
<li>Minimizing the mean of squared errors (MSE) is identical to minimizing the root mean of squared errors (RMSE) because the square root is strictly monotone function.</li>
</ul>
<p>Conclusion: RMSE can be seen as a definition of the OLS optimization goal.</p>
</div>
</section>
<section id="interpreting-rmse" class="slide level2 smaller">
<h2>Interpreting RMSE</h2>
<p>In contrast to R-squared, RMSE can only be interpreted with knowledge about the range and of the response variable! It also has the same unit (grams for <code>body_mass_g</code>).</p>
<div class="cell columns column-output-location">
<div class="column">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a></a>peng_test <span class="sc">|&gt;</span> </span>
<span id="cb77-2"><a></a> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>body_mass_g, <span class="at">fill =</span> species)) <span class="sc">+</span> </span>
<span id="cb77-3"><a></a> <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">50</span>) <span class="sc">+</span> </span>
<span id="cb77-4"><a></a> <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="W10_files/figure-revealjs/unnamed-chunk-40-1.png" width="960"></p>
</figure>
</div>
</div>
</div></div>
<div class="cell columns column-output-location">
<div class="column">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a></a>peng_linreg_pred <span class="sc">|&gt;</span> </span>
<span id="cb78-2"><a></a> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>.pred, <span class="at">fill =</span> species)) <span class="sc">+</span> </span>
<span id="cb78-3"><a></a> <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">50</span>) <span class="sc">+</span> </span>
<span id="cb78-4"><a></a> <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="W10_files/figure-revealjs/unnamed-chunk-41-1.png" width="960"></p>
</figure>
</div>
</div>
</div></div>
<div class="cell columns column-output-location">
<div class="column">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a></a>peng_regtree_pred <span class="sc">|&gt;</span> </span>
<span id="cb79-2"><a></a> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>.pred, <span class="at">fill =</span> species)) <span class="sc">+</span> </span>
<span id="cb79-3"><a></a> <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">50</span>) <span class="sc">+</span> </span>
<span id="cb79-4"><a></a> <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="W10_files/figure-revealjs/unnamed-chunk-42-1.png" width="960"></p>
</figure>
</div>
</div>
</div></div>
<p>The RMSE shows many grams predicted values deviate from the true value on average. (Taking the squaring of differences and root of the average into account.)</p>
</section></section>
<section>
<section id="overfitting-with-decision-trees" class="title-slide slide level1 center">
<h1>Overfitting with decision trees</h1>

</section>
<section id="compare-training-and-test-data" class="slide level2 smaller">
<h2>Compare training and test data</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Linear Regression</strong></p>
<p>Predict with testing data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a></a><span class="fu">predict</span>(peng_linreg_fit, peng_test) <span class="sc">|&gt;</span> <span class="fu">bind_cols</span>(peng_test) <span class="sc">|&gt;</span> </span>
<span id="cb80-2"><a></a> <span class="fu">metrics</span>(<span class="at">truth =</span> body_mass_g, <span class="at">estimate =</span> .pred) <span class="sc">|&gt;</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  .metric .estimator .estimate
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
1 rmse    standard     290.   
2 rsq     standard       0.861</code></pre>
</div>
</div>
<p>Predict with training data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a></a><span class="fu">predict</span>(peng_linreg_fit, peng_train) <span class="sc">|&gt;</span> <span class="fu">bind_cols</span>(peng_train) <span class="sc">|&gt;</span> </span>
<span id="cb82-2"><a></a> <span class="fu">metrics</span>(<span class="at">truth =</span> body_mass_g, <span class="at">estimate =</span> .pred) <span class="sc">|&gt;</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  .metric .estimator .estimate
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
1 rmse    standard     283.   
2 rsq     standard       0.880</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><strong>Decision Tree Regression</strong></p>
<p>Predict with testing data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a></a><span class="fu">predict</span>(peng_regtree_fit, peng_test) <span class="sc">|&gt;</span> <span class="fu">bind_cols</span>(peng_test) <span class="sc">|&gt;</span> </span>
<span id="cb84-2"><a></a> <span class="fu">metrics</span>(<span class="at">truth =</span> body_mass_g, <span class="at">estimate =</span> .pred) <span class="sc">|&gt;</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  .metric .estimator .estimate
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
1 rmse    standard     337.   
2 rsq     standard       0.806</code></pre>
</div>
</div>
<p>Predict with training data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a></a><span class="fu">predict</span>(peng_regtree_fit, peng_train) <span class="sc">|&gt;</span> <span class="fu">bind_cols</span>(peng_train) <span class="sc">|&gt;</span> </span>
<span id="cb86-2"><a></a> <span class="fu">metrics</span>(<span class="at">truth =</span> body_mass_g, <span class="at">estimate =</span> .pred) <span class="sc">|&gt;</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  .metric .estimator .estimate
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
1 rmse    standard     309.   
2 rsq     standard       0.857</code></pre>
</div>
</div>
</div></div>
<p>Where is the prediction better? (Lower RMSE, higher R-squared)</p>
<div class="fragment">
<p>Performance is better for training data (compare values to testing data of the same model). Why? It was used to fit. The model is optimized to predict the training data.</p>
</div>
</section>
<section id="make-a-deeper-tree" class="slide level2 smaller">
<h2>Make a deeper tree</h2>
<ul>
<li>In <code>decision_tree()</code> we can set the maximal depth of the tree to 30.<br>
</li>
<li>The trees we had before were also automatically <em>pruned</em> by sensible defaults.<br>
</li>
<li>By setting the cost complexity parameter to -1 we avoid pruning.<sup>1</sup></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a></a>peng_regtree_deep <span class="ot">&lt;-</span> <span class="fu">decision_tree</span>(</span>
<span id="cb88-2"><a></a> <span class="at">cost_complexity =</span> <span class="sc">-</span><span class="dv">1</span>,</span>
<span id="cb88-3"><a></a> <span class="at">tree_depth =</span> <span class="dv">30</span></span>
<span id="cb88-4"><a></a>) <span class="sc">|&gt;</span></span>
<span id="cb88-5"><a></a> <span class="fu">set_engine</span>(<span class="st">"rpart"</span>) <span class="sc">|&gt;</span></span>
<span id="cb88-6"><a></a> <span class="fu">set_mode</span>(<span class="st">"regression"</span>)</span>
<span id="cb88-7"><a></a>peng_regtree_deep_fit <span class="ot">&lt;-</span> peng_workflow2 <span class="sc">|&gt;</span> <span class="fu">add_model</span>(peng_regtree_deep) <span class="sc">|&gt;</span> </span>
<span id="cb88-8"><a></a> <span class="fu">fit</span>(<span class="at">data =</span> peng_train)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<aside><ol class="aside-footnotes"><li id="fn6"><p>The details of this go beyond the scope of this course.</p></li></ol></aside></section>
<section id="the-deep-tree" class="slide level2">
<h2>The deep tree</h2>

<img data-src="W10_files/figure-revealjs/unnamed-chunk-48-1.png" width="960" class="r-stretch"></section>
<section id="compare-pruned-and-deep-tree" class="slide level2 smaller">
<h2>Compare pruned and deep tree</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Pruned decision tree</strong></p>
<p>Predict with <strong>training data</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a></a>peng_regtree_fit <span class="sc">|&gt;</span> </span>
<span id="cb89-2"><a></a> <span class="fu">predict</span>(<span class="at">new_data =</span> peng_train) <span class="sc">|&gt;</span> <span class="fu">bind_cols</span>(peng_train) <span class="sc">|&gt;</span> </span>
<span id="cb89-3"><a></a> <span class="fu">metrics</span>(<span class="at">truth =</span> body_mass_g, <span class="at">estimate =</span> .pred) <span class="sc">|&gt;</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  .metric .estimator .estimate
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
1 rmse    standard     309.   
2 rsq     standard       0.857</code></pre>
</div>
</div>
<p>Predict with <strong>testing data</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a></a>peng_regtree_fit <span class="sc">|&gt;</span> </span>
<span id="cb91-2"><a></a> <span class="fu">predict</span>(peng_test) <span class="sc">|&gt;</span> <span class="fu">bind_cols</span>(peng_test) <span class="sc">|&gt;</span> </span>
<span id="cb91-3"><a></a> <span class="fu">metrics</span>(<span class="at">truth =</span> body_mass_g, <span class="at">estimate =</span> .pred) <span class="sc">|&gt;</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  .metric .estimator .estimate
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
1 rmse    standard     337.   
2 rsq     standard       0.806</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><strong>Deep decision tree</strong></p>
<p>Predict with <strong>training data</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a></a>peng_regtree_deep_fit <span class="sc">|&gt;</span> </span>
<span id="cb93-2"><a></a> <span class="fu">predict</span>(<span class="at">new_data =</span> peng_train) <span class="sc">|&gt;</span> <span class="fu">bind_cols</span>(peng_train) <span class="sc">|&gt;</span> </span>
<span id="cb93-3"><a></a> <span class="fu">metrics</span>(<span class="at">truth =</span> body_mass_g, <span class="at">estimate =</span> .pred) <span class="sc">|&gt;</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  .metric .estimator .estimate
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
1 rmse    standard     247.   
2 rsq     standard       0.908</code></pre>
</div>
</div>
<p>Predict with <strong>testing data</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a></a>peng_regtree_deep_fit <span class="sc">|&gt;</span> </span>
<span id="cb95-2"><a></a> <span class="fu">predict</span>(peng_test) <span class="sc">|&gt;</span> <span class="fu">bind_cols</span>(peng_test) <span class="sc">|&gt;</span> </span>
<span id="cb95-3"><a></a> <span class="fu">metrics</span>(<span class="at">truth =</span> body_mass_g, <span class="at">estimate =</span> .pred) <span class="sc">|&gt;</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  .metric .estimator .estimate
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
1 rmse    standard     333.   
2 rsq     standard       0.808</code></pre>
</div>
</div>
</div></div>
</section>
<section id="more-in-an-r-script" class="slide level2">
<h2>More in an R-script</h2>
<ul>
<li><p>Overfitting in a spam prediciton model</p></li>
<li><p>From decision trees to random forrests.</p></li>
</ul>
</section></section>
<section>
<section id="the-wisdom-of-the-crowd-diversity-and-the-bias-variance-decomposition" class="title-slide slide level1 center">
<h1>The wisdom of the crowd, “Diversity!”, and the Bias-Variance-Decomposition</h1>

</section>
<section id="galtons-data" class="slide level2 smaller">
<h2>Galton’s data</h2>
<p><em>What is the weight of the meat of this ox?</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a></a><span class="fu">library</span>(readxl)</span>
<span id="cb97-2"><a></a>galton <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/galton.csv"</span>)</span>
<span id="cb97-3"><a></a>galton <span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(Estimate)) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">5</span>) <span class="sc">+</span> <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">1198</span>, <span class="at">color =</span> <span class="st">"green"</span>) <span class="sc">+</span> </span>
<span id="cb97-4"><a></a> <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fu">mean</span>(galton<span class="sc">$</span>Estimate), <span class="at">color =</span> <span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="W10_files/figure-revealjs/unnamed-chunk-53-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
<p>787 estimates, <span style="color:green;">true value</span> 1198, <span style="color:red;">mean</span> 1196.7</p>

<aside><div>
<p>We focus on the arithmetic mean as aggregation function for the wisdom of the crowd here.</p>
</div></aside></section>
<section id="rmse-galtons-data" class="slide level2 smaller">
<h2>RMSE Galton’s data</h2>
<p>Describe the estimation game as a predictive model:</p>
<ul>
<li>All <em>estimates</em> are made to predict the same value: the truth.
<ul>
<li>In contrast to the regression model, the estimate come from people and not from a regression formula.</li>
</ul></li>
<li>The <em>truth</em> is the same for all.
<ul>
<li>In contrast to the regression model, the truth is one value and not a value for each prediction</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a></a>rmse_galton <span class="ot">&lt;-</span> galton <span class="sc">|&gt;</span> </span>
<span id="cb98-2"><a></a> <span class="fu">mutate</span>(<span class="at">true_value =</span> <span class="dv">1198</span>) <span class="sc">|&gt;</span></span>
<span id="cb98-3"><a></a> <span class="fu">rmse</span>(<span class="at">truth =</span> true_value, Estimate)</span>
<span id="cb98-4"><a></a>rmse_galton</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  .metric .estimator .estimate
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
1 rmse    standard        73.6</code></pre>
</div>
</div>
<!-- ## Regression vs. crowd estimation {.smaller} -->
<!-- The linear regression and the crowd estimation problems are similar but not identical! -->
<!-- |Variable      | Linear Regression Model                       | Crowd estimation -->
<!-- |--------------|-----------------------------------------------|-------------------------------------------- -->
<!-- | $y_i$        | Data point of response variable               | True value, uniform for all estimators $y_i = y$ -->
<!-- | $\hat{y}_i$  | Predicted value $\hat{y}_i=b_0+b_1+x_1+\dots$ | Estimate of one estimator -->
<!-- | $\bar{y}$    | Mean of response variable                     | Mean of estimates  -->
</section>
<section id="mse-variance-and-bias-of-estimates" class="slide level2 smaller">
<h2>MSE, Variance, and Bias of estimates</h2>
<p>In a crowd estimation, <span class="math inline">\(n\)</span> estimators delivered the estimates <span class="math inline">\(\hat{y}_1,\dots,\hat{y}_n\)</span>. Let us look at the following measures</p>
<ul>
<li><p><span class="math inline">\(\bar{y} = \frac{1}{n}\sum_{i = 1}^n \hat{y}_i^2\)</span> is the mean estimate, it is the aggregated estimate of the crowd</p></li>
<li><p><span class="math inline">\(\text{MSE} = \text{RMSE}^2 = \frac{1}{n}\sum_{i = 1}^n (\text{truth} - \hat{y}_i)^2\)</span></p></li>
<li><p><span class="math inline">\(\text{Variance} = \frac{1}{n}\sum_{i = 1}^n (\hat{y}_i - \bar{y})^2\)</span></p></li>
<li><p><span class="math inline">\(\text{Bias-squared} = (\bar{y} - \text{truth})^2\)</span> which is the square difference between truth and mean estimate.</p></li>
</ul>
<p>There is a mathematical relation (a math exercise to check):</p>
<p><span class="math display">\[\text{MSE} = \text{Bias-squared} + \text{Variance}\]</span></p>
</section>
<section id="testing-for-galtons-data" class="slide level2 smaller">
<h2>Testing for Galton’s data</h2>
<p><span class="math display">\[\text{MSE} = \text{Bias-squared} + \text{Variance}\]</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a></a>MSE <span class="ot">&lt;-</span> (rmse_galton<span class="sc">$</span>.estimate)<span class="sc">^</span><span class="dv">2</span> </span>
<span id="cb100-2"><a></a>MSE</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5409.795</code></pre>
</div>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a></a>Variance <span class="ot">&lt;-</span> <span class="fu">var</span>(galton<span class="sc">$</span>Estimate)<span class="sc">*</span>(<span class="fu">nrow</span>(galton)<span class="sc">-</span><span class="dv">1</span>)<span class="sc">/</span><span class="fu">nrow</span>(galton)</span>
<span id="cb102-2"><a></a><span class="co"># Note, we had to correct for the divisor (n-1) in the classical statistical definition</span></span>
<span id="cb102-3"><a></a><span class="co"># to get the sample variance instead of the estimate for the population variance</span></span>
<span id="cb102-4"><a></a>Variance</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5408.132</code></pre>
</div>
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a></a>Bias_squared <span class="ot">&lt;-</span> (<span class="fu">mean</span>(galton<span class="sc">$</span>Estimate) <span class="sc">-</span> <span class="dv">1198</span>)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb104-2"><a></a>Bias_squared</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.663346</code></pre>
</div>
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a></a>Bias_squared <span class="sc">+</span> Variance</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5409.795</code></pre>
</div>
</div>

<aside><div>
<p>Such nice mathematical properties are probably one reason why these squared measures are so popular.</p>
</div></aside></section>
<section id="the-diversity-prediction-theorem" class="slide level2 smaller">
<h2>The diversity prediction theorem<sup>1</sup></h2>
<ul>
<li><em>MSE</em> is a measure the average <strong>individuals error</strong></li>
<li><em>Bias-squared</em> is a measure the <strong>collective error</strong></li>
<li><em>Variance</em> is a measure for the <strong>diversity</strong> of estimates around the mean</li>
</ul>
<p>The mathematical relation <span class="math display">\[\text{MSE} = \text{Bias-squared} + \text{Variance}\]</span> can be formulated as</p>
<p><strong>Collective error = Individual error - Diversity</strong></p>
<p>Interpretation: <em>The higher the diversity the lower the collective error!</em></p>
<aside><ol class="aside-footnotes"><li id="fn7"><p>Notion from: Page, S. E. (2007). The Difference: How the Power of Diversity Creates Better Groups, Firms, Schools, and Societies. Princeton University Press.</p></li></ol></aside></section>
<section id="why-is-this-message-a-bit-suggestive" class="slide level2 smaller">
<h2>Why is this message a bit suggestive?</h2>
<p>The mathematical relation <span class="math display">\[\text{MSE} = \text{Bias-squared} + \text{Variance}\]</span> can be formulated as</p>
<p><strong>Collective error = Individual error - Diversity</strong></p>
<p>Interpretation: <em>The higher the diversity the lower the collective error!</em></p>
<div class="fragment">
<ul>
<li><span class="math inline">\(\text{MSE}\)</span> and <span class="math inline">\(\text{Variance}\)</span> are not independent!</li>
<li>Activities to increase diversity (Variance) typically also increase the average individual error (MSE).</li>
<li>For example, if we just add more random estimates with same mean but wild variance to our sample we increase both and do not gain any decrease of the collective error.</li>
</ul>
</div>
</section>
<section id="accuracy-for-numerical-estimate" class="slide level2 smaller">
<h2>Accuracy for numerical estimate</h2>
<ul>
<li>For binary classifiers <strong>accuracy</strong> has a simple definition: Fraction of correct classifications.
<ul>
<li>It can be further informed by other more specific measures taken from the confusion matrix (sensitivity, specificity)</li>
</ul></li>
</ul>
<p>How about numerical estimators?<br>
For example outcomes of estimation games, or linear regression models.</p>
<ul>
<li>Accuracy is for example measured by (R)MSE</li>
<li><span class="math inline">\(\text{MSE} = \text{Bias-squared} + \text{Variance}\)</span> shows us that we can make a<br>
<strong>bias-variance decomposition</strong></li>
<li>That means some part of the error is a systematic (the bias) and another part due to random variation (the variance).</li>
<li>Learn more about the bias-variance tradeoff in statistical learning independently! It is an important concept to understand predictive models.</li>
</ul>
</section>
<section id="d-accuracy-trueness-and-precision" class="slide level2 smaller">
<h2>2-d Accuracy: Trueness and Precision</h2>
<p>According to ISO 5725-1 Standard: <em>Accuracy (trueness and precision) of measurement methods and results - Part 1: General principles and definitions.</em> there are two dimension of accuracy of numerical measurement.</p>
<p><img data-src="https://upload.wikimedia.org/wikipedia/commons/9/92/Accuracy_%28trueness_and_precision%29.svg"> <img data-src="img/accuracy_trueness_precision.png" height="300"></p>
</section>
<section id="what-is-a-wise-crowd" class="slide level2 smaller">
<h2>What is a wise crowd?</h2>
<p>Assume the dots are estimates. <strong>Which is a wise crowd?</strong></p>
<p><img data-src="img/accuracy_trueness_precision.png" height="300"></p>
<div class="fragment">
<ul>
<li>Of course, high trueness and high precision! But, …</li>
<li>Focusing on the <strong>crowd</strong> being wise instead of its <strong>individuals</strong>: High trueness, low precision.</li>
</ul>

<div class="quarto-auto-generated-content">
<p><img src="img/ConstructorUniversity.png" class="slide-logo"></p>
<div class="footer footer-default">
<p>MDSSB-DSCO-02: Data Science Concepts</p>
</div>
</div>
</div>
</section></section>

    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="site_libs/revealjs/plugin/search/search.js"></script>
  <script src="site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: true,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp("https:\/\/CU-F24-MDSSB-01-Concepts-Tools\.github\.io\/Website\/");
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>